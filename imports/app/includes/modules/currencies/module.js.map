{"version":3,"file":"module.js","names":["Module","name","global","isready","isloading","currencies","currencies_timestamp","Date","now","console","log","parentscriptloader","callback","self","modulescriptloader","findScriptLoader","getScriptLoader","xtraroot","interfaceroot","moduleroot","push_script","load_scripts","init","rootscriptloader","getRootScriptLoader","signalEvent","loadModule","registerHooks","currencyuuid","array","i","length","uuid","currency","push","session","getCurrency","provider","Provider","getModuleClass","commonmodule","getModuleObject","walletmodule","_keys","clientAccess","getClientStorageAccessInstance","Promise","resolve","reject","readClientSideJson","err","res","_currencies","curr","addCurrency","_checkCurrencyInMemory","saveClientSideJson","readLocalCurrencies","bInList","saveLocalCurrencies","currencyschemeuuid","scheme_uuid","getSchemeFromUUID","scheme","web3url","web3providerurl","getSchemeFromWeb3Url","getDefaultScheme","defaultlocalscheme","cloneOnWeb3ProviderUrl","getCurrencyScheme","getWeb3ProviderUrl","window","GlobalClass","_GlobalClass","simplestore","Global","getGlobalObject","registerModuleObject","registerModuleDepency"],"sources":["../../../../../../../../imports/app/includes/modules/currencies/module.js"],"sourcesContent":["'use strict';\n\nvar Module = class {\n\t\n\tconstructor() {\n\t\tthis.name = 'currencies';\n\t\t\n\t\tthis.global = null; // put by global on registration\n\t\tthis.isready = false;\n\t\tthis.isloading = false;\n\t\t\n\t\tthis.currencies = [];\n\t\tthis.currencies_timestamp = Date.now();\n\t}\n\t\n\tinit() {\n\t\tconsole.log('module init called for ' + this.name);\n\t\t\n\t\tvar global = this.global;\n\t\t\n\t\tthis.isready = true;\n\t}\n\t\n\tloadModule(parentscriptloader, callback) {\n\t\tconsole.log('loadModule called for module ' + this.name);\n\n\t\tif (this.isloading)\n\t\t\treturn;\n\t\t\t\n\t\tthis.isloading = true;\n\n\t\tvar self = this;\n\t\tvar global = this.global;\n\n\t\t// wallet module script loader\n\t\tvar modulescriptloader;\n\t\t\n\t\t// look if currenciesloader already created (e.g. for loading in node.js)\n\t\tmodulescriptloader = global.findScriptLoader('currenciesloader');\n\n\t\t// if not, create on as child as parent script loader passed in argument\n\t\tif (!modulescriptloader)\n\t\tmodulescriptloader = global.getScriptLoader('currenciesloader', parentscriptloader);\n\t\t\n\t\t\n\t\tvar xtraroot = './includes';\n\t\t\n\t\tvar interfaceroot = xtraroot + '/interface';\n\n\t\t//modulescriptloader.push_script( interfaceroot + '/wallet-server-access.js');\n\t\t\n\t\tvar moduleroot = xtraroot + '/modules/currencies';\n\n\t\tmodulescriptloader.push_script( moduleroot + '/model/currency-amount.js');\n\t\tmodulescriptloader.push_script( moduleroot + '/model/decimal-amount.js');\n\t\tmodulescriptloader.push_script( moduleroot + '/model/providers/provider.js');\n\n\t\t\n\t\tmodulescriptloader.load_scripts(function() { self.init(); if (callback) callback(null, self); });\n\t\t\n\t\treturn modulescriptloader;\n\t}\n\n\tisReady() {\n\t\treturn this.isready;\n\t}\n\n\thasLoadStarted() {\n\t\treturn this.isloading;\n\t}\n\t\n\t// optional  module functions\n\tregisterHooks() {\n\t\tconsole.log('module registerHooks called for ' + this.name);\n\t\t\n\t\tvar global = this.global;\n\t\t\n\t\n\t\t// signal module is ready\n\t\tvar rootscriptloader = global.getRootScriptLoader();\n\t\trootscriptloader.signalEvent('on_currencies_module_ready');\n\t}\n\t\n\tpostRegisterModule() {\n\t\tconsole.log('postRegisterModule called for ' + this.name);\n\t\tif (!this.isloading) {\n\t\t\tvar global = this.global;\n\t\t\tvar self = this;\n\t\t\tvar rootscriptloader = global.getRootScriptLoader();\n\t\t\t\n\t\t\tthis.loadModule(rootscriptloader, function() {\n\t\t\t\tif (self.registerHooks)\n\t\t\t\tself.registerHooks();\n\t\t\t});\n\t\t}\n\t}\n\t\n\t\n\t//\n\t// hooks\n\t//\n\n\n\t\n\t//\n\t// Currencies functions\n\t//\n\tgetCurrencies() {\n\t\treturn this.currencies;\n\t}\n\n\tgetCurrenciesTimeStamp() {\n\t\treturn this.currencies_timestamp;\n\t}\n\n\tgetCurrency(currencyuuid) {\n\t\tvar array = this.currencies;\n\n\t\tfor (var i = 0; i < (array ? array.length : 0); i++) {\n\t\t\tif (array[i].uuid === currencyuuid)\n\t\t\t\treturn array[i];\n\t\t}\n\n\t}\n\n\taddCurrency(currency) {\n\t\tthis.currencies.push(currency);\n\t\tthis.currencies_timestamp = Date.now(); // change time stamp\n\t}\n\n\tgetCurrencyProvider(session, currencyuuid) {\n\t\tvar global = this.global;\n\t\tvar currency = this.getCurrency(currencyuuid);\n\n\t\tif (currency && currency.provider) {\n\t\t\t//var Provider = require('./model/providers/' + currency.provider).default;\n\t\t\tvar Provider = global.getModuleClass('currencies', currency.provider); // to be usable in node.js\n\t\t\t\n\t\t\tvar provider = new Provider(session, currency);\n\n\t\t\treturn provider;\n\t\t}\n\t}\n\n\tasync readLocalCurrencies(session) {\n\t\tvar global = this.global;\n\n\t\tvar commonmodule = global.getModuleObject('common');\n\t\tvar walletmodule = this;\n\t\t\n\t\tvar _keys = ['shared', 'currencies', 'currencies']; // look in 'shared' branch\n\n\t\tvar clientAccess = session.getClientStorageAccessInstance();\n\t\t\n\t\tvar currencies = await new Promise((resolve, reject) => { \n\t\t\tclientAccess.readClientSideJson(_keys, (err, res) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tresolve([]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar _currencies = res;\n\t\t\t\t\t\n\t\t\t\t\tresolve(_currencies);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tcurrencies = [];\n\t\t});\n\n\t\treturn currencies\n\t}\n\n\t_checkCurrencyInMemory(currency) {\n\t\tvar currencyuuid = currency.uuid;\n\n\t\tvar curr = this.getCurrency(currencyuuid);\n\n\t\tif (!curr)\n\t\tthis.addCurrency(currency);\n\t}\n\n\tasync saveLocalCurrencies(session, currencies) {\n\t\tvar global = this.global;\n\n\t\tfor (var i = 0; i < currencies.length; i++) {\n\t\t\tthis._checkCurrencyInMemory(currencies[i]);\n\t\t}\n\n\t\tvar _keys = ['shared', 'currencies', 'currencies']; // look in 'shared' branch\n\t\t\n\t\t// create json\n\t\tvar clientAccess = session.getClientStorageAccessInstance();\n\t\t\n\t\treturn new Promise((resolve, reject) => { \n\t\t\tclientAccess.saveClientSideJson(_keys, currencies, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync saveLocalCurrency(session, currency) {\n\t\tvar currencies = await this.readLocalCurrencies(session);\n\n\t\tif (currencies) {\n\t\t\t// check if it is in the list\n\t\t\tvar bInList = false;\n\t\t\t\n\t\t\tfor (var i = 0; i < currencies.length; i++) {\n\t\t\t\tif (currency.uuid == currencies[i].uuid) {\n\t\t\t\t\tbInList = true;\n\t\t\t\t\tcurrencies[i] = currency;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// add it if it is not\n\t\t\tif (!bInList)\n\t\t\tcurrencies.push(currency);\n\t\t\n\t\t\treturn this.saveLocalCurrencies(session, currencies);\n\t\t}\n\t\telse {\n\t\t\treturn Promise.reject('could not retrieve the list of schemes');\n\t\t}\n\t}\n\n\tasync getCurrencyScheme(session, currency) {\n\t\tif (!session)\n\t\t\treturn Promise.reject('session is undefined');\n\t\t\n\t\tif (!currency)\n\t\t\treturn Promise.reject('currency is undefined');\n\t\t\n\t\tvar global = this.global;\n\t\tvar walletmodule = global.getModuleObject('wallet');\n\n\t\t// we look if the currency has a trade scheme specified\n\t\tvar currencyschemeuuid = (currency.scheme_uuid ? currency.scheme_uuid : null );\n\t\tvar scheme;\n\n\t\tif (currencyschemeuuid) {\n\t\t\t// a built-in scheme has been specified in currency definition\n\t\t\tscheme = await walletmodule.getSchemeFromUUID(session, currencyschemeuuid)\n\t\t\t.catch(err => {});\n\t\t}\n\t\telse {\n\t\t\t// scheme has probably already been created with web3providerurl\n\t\t\tvar web3url = currency.web3providerurl;\n\t\t\tscheme = await walletmodule.getSchemeFromWeb3Url(session, web3url)\n\t\t\t.catch(err => {});\n\n\t\t\tif (!scheme) {\n\t\t\t\t// if not, we create a local scheme now and save it\n\t\t\t\tvar defaultlocalscheme = await walletmodule.getDefaultScheme(session, 0);\n\t\t\t\tscheme = await defaultlocalscheme.cloneOnWeb3ProviderUrl(web3url)\n\t\t\t\t.catch(err => {});\n\t\t\t}\n\t\t}\n\t\n\t\treturn scheme;\n\t}\n\n\tasync getCurrencyWeb3ProviderUrl(session, currency) {\n\t\tif (currency.web3providerurl)\n\t\t\treturn currency.web3providerurl;\n\t\telse {\n\t\t\tvar scheme = await this.getCurrencyScheme(session, currency);\n\n\t\t\tif (scheme)\n\t\t\t\treturn scheme.getWeb3ProviderUrl();\n\t\t\telse\n\t\t\t\tconsole.log('currency is badly configured ' + currency.uuid);\n\t\t}\n\t}\n\n\n}\n\n\nif ( typeof window !== 'undefined' && typeof window.GlobalClass !== 'undefined' && window.GlobalClass ) {\n\tvar _GlobalClass = window.GlobalClass;\n}\nelse if (typeof window !== 'undefined') {\n\tvar _GlobalClass = ( window && window.simplestore && window.simplestore.Global ? window.simplestore.Global : null);\n}\nelse if (typeof global !== 'undefined') {\n\t// we are in node js\n\tvar _GlobalClass = ( global && global.simplestore && global.simplestore.Global ? global.simplestore.Global : null);\n}\n\n_GlobalClass.getGlobalObject().registerModuleObject(new Module());\n\n// dependencies\n_GlobalClass.getGlobalObject().registerModuleDepency('currencies', 'common');\t\t\n\n"],"mappings":"AAAA;;;;+CACA,oJ;;;;;;;;;;;;AACA,IAAIA,MAAM;EAET,kBAAc;IAAA;;IACb,KAAKC,IAAL,GAAY,YAAZ;IAEA,KAAKC,MAAL,GAAc,IAAd,CAHa,CAGO;;IACpB,KAAKC,OAAL,GAAe,KAAf;IACA,KAAKC,SAAL,GAAiB,KAAjB;IAEA,KAAKC,UAAL,GAAkB,EAAlB;IACA,KAAKC,oBAAL,GAA4BC,IAAI,CAACC,GAAL,EAA5B;EACA;;EAXQ;IAAA;IAAA,OAaT,gBAAO;MACNC,OAAO,CAACC,GAAR,CAAY,4BAA4B,KAAKT,IAA7C;MAEA,IAAIC,MAAM,GAAG,KAAKA,MAAlB;MAEA,KAAKC,OAAL,GAAe,IAAf;IACA;EAnBQ;IAAA;IAAA,OAqBT,oBAAWQ,kBAAX,EAA+BC,QAA/B,EAAyC;MACxCH,OAAO,CAACC,GAAR,CAAY,kCAAkC,KAAKT,IAAnD;MAEA,IAAI,KAAKG,SAAT,EACC;MAED,KAAKA,SAAL,GAAiB,IAAjB;MAEA,IAAIS,IAAI,GAAG,IAAX;MACA,IAAIX,MAAM,GAAG,KAAKA,MAAlB,CATwC,CAWxC;;MACA,IAAIY,kBAAJ,CAZwC,CAcxC;;MACAA,kBAAkB,GAAGZ,MAAM,CAACa,gBAAP,CAAwB,kBAAxB,CAArB,CAfwC,CAiBxC;;MACA,IAAI,CAACD,kBAAL,EACAA,kBAAkB,GAAGZ,MAAM,CAACc,eAAP,CAAuB,kBAAvB,EAA2CL,kBAA3C,CAArB;MAGA,IAAIM,QAAQ,GAAG,YAAf;MAEA,IAAIC,aAAa,GAAGD,QAAQ,GAAG,YAA/B,CAxBwC,CA0BxC;;MAEA,IAAIE,UAAU,GAAGF,QAAQ,GAAG,qBAA5B;MAEAH,kBAAkB,CAACM,WAAnB,CAAgCD,UAAU,GAAG,2BAA7C;MACAL,kBAAkB,CAACM,WAAnB,CAAgCD,UAAU,GAAG,0BAA7C;MACAL,kBAAkB,CAACM,WAAnB,CAAgCD,UAAU,GAAG,8BAA7C;MAGAL,kBAAkB,CAACO,YAAnB,CAAgC,YAAW;QAAER,IAAI,CAACS,IAAL;QAAa,IAAIV,QAAJ,EAAcA,QAAQ,CAAC,IAAD,EAAOC,IAAP,CAAR;MAAuB,CAA/F;MAEA,OAAOC,kBAAP;IACA;EA3DQ;IAAA;IAAA,OA6DT,mBAAU;MACT,OAAO,KAAKX,OAAZ;IACA;EA/DQ;IAAA;IAAA,OAiET,0BAAiB;MAChB,OAAO,KAAKC,SAAZ;IACA,CAnEQ,CAqET;;EArES;IAAA;IAAA,OAsET,yBAAgB;MACfK,OAAO,CAACC,GAAR,CAAY,qCAAqC,KAAKT,IAAtD;MAEA,IAAIC,MAAM,GAAG,KAAKA,MAAlB,CAHe,CAMf;;MACA,IAAIqB,gBAAgB,GAAGrB,MAAM,CAACsB,mBAAP,EAAvB;MACAD,gBAAgB,CAACE,WAAjB,CAA6B,4BAA7B;IACA;EA/EQ;IAAA;IAAA,OAiFT,8BAAqB;MACpBhB,OAAO,CAACC,GAAR,CAAY,mCAAmC,KAAKT,IAApD;;MACA,IAAI,CAAC,KAAKG,SAAV,EAAqB;QACpB,IAAIF,MAAM,GAAG,KAAKA,MAAlB;QACA,IAAIW,IAAI,GAAG,IAAX;QACA,IAAIU,gBAAgB,GAAGrB,MAAM,CAACsB,mBAAP,EAAvB;QAEA,KAAKE,UAAL,CAAgBH,gBAAhB,EAAkC,YAAW;UAC5C,IAAIV,IAAI,CAACc,aAAT,EACAd,IAAI,CAACc,aAAL;QACA,CAHD;MAIA;IACD,CA7FQ,CAgGT;IACA;IACA;IAIA;IACA;IACA;;EAxGS;IAAA;IAAA,OAyGT,yBAAgB;MACf,OAAO,KAAKtB,UAAZ;IACA;EA3GQ;IAAA;IAAA,OA6GT,kCAAyB;MACxB,OAAO,KAAKC,oBAAZ;IACA;EA/GQ;IAAA;IAAA,OAiHT,qBAAYsB,YAAZ,EAA0B;MACzB,IAAIC,KAAK,GAAG,KAAKxB,UAAjB;;MAEA,KAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAID,KAAK,GAAGA,KAAK,CAACE,MAAT,GAAkB,CAA3B,CAAjB,EAAgDD,CAAC,EAAjD,EAAqD;QACpD,IAAID,KAAK,CAACC,CAAD,CAAL,CAASE,IAAT,KAAkBJ,YAAtB,EACC,OAAOC,KAAK,CAACC,CAAD,CAAZ;MACD;IAED;EAzHQ;IAAA;IAAA,OA2HT,qBAAYG,QAAZ,EAAsB;MACrB,KAAK5B,UAAL,CAAgB6B,IAAhB,CAAqBD,QAArB;MACA,KAAK3B,oBAAL,GAA4BC,IAAI,CAACC,GAAL,EAA5B,CAFqB,CAEmB;IACxC;EA9HQ;IAAA;IAAA,OAgIT,6BAAoB2B,OAApB,EAA6BP,YAA7B,EAA2C;MAC1C,IAAI1B,MAAM,GAAG,KAAKA,MAAlB;MACA,IAAI+B,QAAQ,GAAG,KAAKG,WAAL,CAAiBR,YAAjB,CAAf;;MAEA,IAAIK,QAAQ,IAAIA,QAAQ,CAACI,QAAzB,EAAmC;QAClC;QACA,IAAIC,QAAQ,GAAGpC,MAAM,CAACqC,cAAP,CAAsB,YAAtB,EAAoCN,QAAQ,CAACI,QAA7C,CAAf,CAFkC,CAEqC;;QAEvE,IAAIA,QAAQ,GAAG,IAAIC,QAAJ,CAAaH,OAAb,EAAsBF,QAAtB,CAAf;QAEA,OAAOI,QAAP;MACA;IACD;EA5IQ;IAAA;IAAA;MAAA,sFA8IT,iBAA0BF,OAA1B;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACKjC,MADL,GACc,KAAKA,MADnB;gBAGKsC,YAHL,GAGoBtC,MAAM,CAACuC,eAAP,CAAuB,QAAvB,CAHpB;gBAIKC,YAJL,GAIoB,IAJpB;gBAMKC,KANL,GAMa,CAAC,QAAD,EAAW,YAAX,EAAyB,YAAzB,CANb,EAMqD;;gBAEhDC,YARL,GAQoBT,OAAO,CAACU,8BAAR,EARpB;gBAAA;gBAAA,OAUwB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;kBACvDJ,YAAY,CAACK,kBAAb,CAAgCN,KAAhC,EAAuC,UAACO,GAAD,EAAMC,GAAN,EAAc;oBACpD,IAAID,GAAJ,EAAS;sBACRH,OAAO,CAAC,EAAD,CAAP;oBACA,CAFD,MAGK;sBACJ,IAAIK,WAAW,GAAGD,GAAlB;sBAEAJ,OAAO,CAACK,WAAD,CAAP;oBACA;kBACD,CATD;gBAUA,CAXsB,WAYhB,UAAAF,GAAG,EAAI;kBACb7C,UAAU,GAAG,EAAb;gBACA,CAdsB,CAVxB;;cAAA;gBAUKA,UAVL;gBAAA,iCA0BQA,UA1BR;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CA9IS;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA,OA2KT,gCAAuB4B,QAAvB,EAAiC;MAChC,IAAIL,YAAY,GAAGK,QAAQ,CAACD,IAA5B;MAEA,IAAIqB,IAAI,GAAG,KAAKjB,WAAL,CAAiBR,YAAjB,CAAX;MAEA,IAAI,CAACyB,IAAL,EACA,KAAKC,WAAL,CAAiBrB,QAAjB;IACA;EAlLQ;IAAA;IAAA;MAAA,sFAoLT,kBAA0BE,OAA1B,EAAmC9B,UAAnC;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACKH,MADL,GACc,KAAKA,MADnB;;gBAGC,KAAS4B,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAGzB,UAAU,CAAC0B,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;kBAC3C,KAAKyB,sBAAL,CAA4BlD,UAAU,CAACyB,CAAD,CAAtC;gBACA;;gBAEGa,KAPL,GAOa,CAAC,QAAD,EAAW,YAAX,EAAyB,YAAzB,CAPb,EAOqD;gBAEpD;;gBACIC,YAVL,GAUoBT,OAAO,CAACU,8BAAR,EAVpB;gBAAA,kCAYQ,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;kBACvCJ,YAAY,CAACY,kBAAb,CAAgCb,KAAhC,EAAuCtC,UAAvC,EAAmD,UAAC6C,GAAD,EAAMC,GAAN,EAAc;oBAChE,IAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KAA2BH,OAAO,CAACI,GAAD,CAAP;kBAC3B,CAFD;gBAGA,CAJM,CAZR;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CApLS;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,oFAuMT,kBAAwBhB,OAAxB,EAAiCF,QAAjC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACwB,KAAKwB,mBAAL,CAAyBtB,OAAzB,CADxB;;cAAA;gBACK9B,UADL;;gBAAA,KAGKA,UAHL;kBAAA;kBAAA;gBAAA;;gBAIE;gBACIqD,OALN,GAKgB,KALhB;gBAOW5B,CAPX,GAOe,CAPf;;cAAA;gBAAA,MAOkBA,CAAC,GAAGzB,UAAU,CAAC0B,MAPjC;kBAAA;kBAAA;gBAAA;;gBAAA,MAQOE,QAAQ,CAACD,IAAT,IAAiB3B,UAAU,CAACyB,CAAD,CAAV,CAAcE,IARtC;kBAAA;kBAAA;gBAAA;;gBASI0B,OAAO,GAAG,IAAV;gBACArD,UAAU,CAACyB,CAAD,CAAV,GAAgBG,QAAhB;gBAVJ;;cAAA;gBAOyCH,CAAC,EAP1C;gBAAA;gBAAA;;cAAA;gBAeE;gBACA,IAAI,CAAC4B,OAAL,EACArD,UAAU,CAAC6B,IAAX,CAAgBD,QAAhB;gBAjBF,kCAmBS,KAAK0B,mBAAL,CAAyBxB,OAAzB,EAAkC9B,UAAlC,CAnBT;;cAAA;gBAAA,kCAsBSyC,OAAO,CAACE,MAAR,CAAe,wCAAf,CAtBT;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAvMS;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,oFAiOT,kBAAwBb,OAAxB,EAAiCF,QAAjC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACME,OADN;kBAAA;kBAAA;gBAAA;;gBAAA,kCAESW,OAAO,CAACE,MAAR,CAAe,sBAAf,CAFT;;cAAA;gBAAA,IAIMf,QAJN;kBAAA;kBAAA;gBAAA;;gBAAA,kCAKSa,OAAO,CAACE,MAAR,CAAe,uBAAf,CALT;;cAAA;gBAOK9C,MAPL,GAOc,KAAKA,MAPnB;gBAQKwC,YARL,GAQoBxC,MAAM,CAACuC,eAAP,CAAuB,QAAvB,CARpB,EAUC;;gBACImB,kBAXL,GAW2B3B,QAAQ,CAAC4B,WAAT,GAAuB5B,QAAQ,CAAC4B,WAAhC,GAA8C,IAXzE;;gBAAA,KAcKD,kBAdL;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAgBiBlB,YAAY,CAACoB,iBAAb,CAA+B3B,OAA/B,EAAwCyB,kBAAxC,WACR,UAAAV,GAAG,EAAI,CAAE,CADD,CAhBjB;;cAAA;gBAgBEa,MAhBF;gBAAA;gBAAA;;cAAA;gBAoBE;gBACIC,OArBN,GAqBgB/B,QAAQ,CAACgC,eArBzB;gBAAA;gBAAA,OAsBiBvB,YAAY,CAACwB,oBAAb,CAAkC/B,OAAlC,EAA2C6B,OAA3C,WACR,UAAAd,GAAG,EAAI,CAAE,CADD,CAtBjB;;cAAA;gBAsBEa,MAtBF;;gBAAA,IAyBOA,MAzBP;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OA2BkCrB,YAAY,CAACyB,gBAAb,CAA8BhC,OAA9B,EAAuC,CAAvC,CA3BlC;;cAAA;gBA2BOiC,kBA3BP;gBAAA;gBAAA,OA4BkBA,kBAAkB,CAACC,sBAAnB,CAA0CL,OAA1C,WACR,UAAAd,GAAG,EAAI,CAAE,CADD,CA5BlB;;cAAA;gBA4BGa,MA5BH;;cAAA;gBAAA,kCAiCQA,MAjCR;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAjOS;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,6FAqQT,kBAAiC5B,OAAjC,EAA0CF,QAA1C;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACKA,QAAQ,CAACgC,eADd;kBAAA;kBAAA;gBAAA;;gBAAA,kCAEShC,QAAQ,CAACgC,eAFlB;;cAAA;gBAAA;gBAAA,OAIqB,KAAKK,iBAAL,CAAuBnC,OAAvB,EAAgCF,QAAhC,CAJrB;;cAAA;gBAIM8B,MAJN;;gBAAA,KAMMA,MANN;kBAAA;kBAAA;gBAAA;;gBAAA,kCAOUA,MAAM,CAACQ,kBAAP,EAPV;;cAAA;gBASG9D,OAAO,CAACC,GAAR,CAAY,kCAAkCuB,QAAQ,CAACD,IAAvD;;cATH;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CArQS;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;;EAAA;AAAA,GAAV;;AAsRA,IAAK,OAAOwC,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAACC,WAAd,KAA8B,WAA/D,IAA8ED,MAAM,CAACC,WAA1F,EAAwG;EACvG,IAAIC,YAAY,GAAGF,MAAM,CAACC,WAA1B;AACA,CAFD,MAGK,IAAI,OAAOD,MAAP,KAAkB,WAAtB,EAAmC;EACvC,IAAIE,YAAY,GAAKF,MAAM,IAAIA,MAAM,CAACG,WAAjB,IAAgCH,MAAM,CAACG,WAAP,CAAmBC,MAAnD,GAA4DJ,MAAM,CAACG,WAAP,CAAmBC,MAA/E,GAAwF,IAA7G;AACA,CAFI,MAGA,IAAI,OAAO1E,MAAP,KAAkB,WAAtB,EAAmC;EACvC;EACA,IAAIwE,YAAY,GAAKxE,MAAM,IAAIA,MAAM,CAACyE,WAAjB,IAAgCzE,MAAM,CAACyE,WAAP,CAAmBC,MAAnD,GAA4D1E,MAAM,CAACyE,WAAP,CAAmBC,MAA/E,GAAwF,IAA7G;AACA;;AAEDF,YAAY,CAACG,eAAb,GAA+BC,oBAA/B,CAAoD,IAAI9E,MAAJ,EAApD,E,CAEA;;;AACA0E,YAAY,CAACG,eAAb,GAA+BE,qBAA/B,CAAqD,YAArD,EAAmE,QAAnE"}