{"version":3,"file":"module.js","names":["Module","name","current_version","global","isready","isloading","controllers","console","log","parentscriptloader","callback","self","modulescriptloader","findScriptLoader","getChildLoader","xtraroot","moduleroot","push_script","load_scripts","init","registerHook","getVersionInfo_hook","modifyHookPriority","rootscriptloader","getRootScriptLoader","signalEvent","loadModule","registerHooks","result","params","_globalscope","getExecutionGlobalScope","Constants","simplestore","module_versioninfo","versioninfos","versioninfo","label","t","value","push","module","handled","Controllers","window","GlobalClass","_GlobalClass","Global","getGlobalObject","registerModuleObject","registerModuleDepency"],"sources":["../../../../../../../imports/app/includes/modules/module.js"],"sourcesContent":["'use strict';\n\nvar Module = class {\n\tconstructor() {\n\t\tthis.name = 'currenciesmodules';\n\t\tthis.current_version = \"0.30.10.2021.06.30\";\n\t\t\n\t\tthis.global = null; // put by global on registration\n\t\tthis.isready = false;\n\t\tthis.isloading = false;\n\t\t\n\t\tthis.controllers = null;\n\n\t}\n\t\n\tinit() {\n\t\tconsole.log('module init called for ' + this.name);\n\t\t\n\t\tthis.isready = true;\n\t}\n\t\n\t// compulsory  module functions\n\tloadModule(parentscriptloader, callback) {\n\t\tconsole.log('loadModule called for module ' + this.name);\n\t\t\n\t\tif (this.isloading)\n\t\t\treturn;\n\t\t\t\n\t\tthis.isloading = true;\n\n\t\tvar self = this;\n\t\tvar global = this.global;\n\n\t\t// clients module script loader\n\t\tvar modulescriptloader;\n\t\t\n\t\t// look if currenciesloader already created (e.g. for loading in node.js)\n\t\tmodulescriptloader = global.findScriptLoader('currenciesmodulesloader');\n\n\t\t// if not, create on as child as parent script loader passed in argument\n\t\tif (!modulescriptloader)\n\t\tmodulescriptloader = parentscriptloader.getChildLoader('currenciesmodulesloader');\n\n\t\tvar xtraroot = './includes';\n\t\tvar moduleroot = xtraroot + '/modules';\n\n\t\tmodulescriptloader.push_script( moduleroot + '/control/controllers.js');\n\n\t\tmodulescriptloader.load_scripts(function() { self.init(); if (callback) callback(null, self);});\n\n\t\treturn modulescriptloader;\t\n\t}\n\t\n\tisReady() {\n\t\treturn this.isready;\n\t}\n\n\thasLoadStarted() {\n\t\treturn this.isloading;\n\t}\n\n\t// optional  module functions\n\tregisterHooks() {\n\t\tconsole.log('module registerHooks called for ' + this.name);\n\t\t\n\t\tvar global = this.global;\n\t\t\n\t\tglobal.registerHook('getVersionInfo_hook', this.name, this.getVersionInfo_hook);\n\t\tglobal.modifyHookPriority('getVersionInfo_hook', this.name, -7);\n\t\t\n\t\t\n\t\t// signal module is ready\n\t\tvar rootscriptloader = global.getRootScriptLoader();\n\t\trootscriptloader.signalEvent('on_currencies_modules_ready');\n\t}\n\t\n\tpostRegisterModule() {\n\t\tconsole.log('postRegisterModule called for ' + this.name);\n\t\tif (!this.isloading) {\n\t\t\tvar global = this.global;\n\t\t\tvar self = this;\n\t\t\tvar rootscriptloader = global.getRootScriptLoader();\n\t\t\t\n\t\t\tthis.loadModule(rootscriptloader, () => {\n\t\t\t\tif (this.registerHooks)\n\t\t\t\tthis.registerHooks();\n\t\t\t});\n\t\t}\n\t}\n\t\n\t\n\t//\n\t// hooks\n\t//\n\tgetVersionInfo_hook(result, params) {\n\t\tconsole.log('getVersionInfo_hook called for ' + this.name);\n\t\t\n\t\tvar global = this.global;\n\t\tvar _globalscope = global.getExecutionGlobalScope();\n\t\tvar Constants = _globalscope.simplestore.Constants;\n\t\tvar module_versioninfo = this.current_version;\n\t\t\n\t\tvar versioninfos = params[0];\n\t\t\n\t\tvar versioninfo = {};\n\t\t\n\t\tversioninfo.label = global.t('currencies');\n\t\tversioninfo.value = (module_versioninfo ? module_versioninfo : global.t('unknown'));\n\t\t\n\t\tversioninfos.push(versioninfo);\n\n\t\t\n\t\tresult.push({module: this.name, handled: true});\n\t\t\n\t\treturn true;\n\t}\n\n\t// api functions\n\t\n\t//\n\t// control\n\t//\n\t\n\tgetControllersObject() {\n\t\tif (this.controllers)\n\t\t\treturn this.controllers;\n\t\t\n\t\tthis.controllers = new this.Controllers(this);\n\t\t\n\t\treturn this.controllers;\n\t}\n\n}\n\n\nif ( typeof window !== 'undefined' && typeof window.GlobalClass !== 'undefined' && window.GlobalClass ) {\n\tvar _GlobalClass = window.GlobalClass;\n}\nelse if (typeof window !== 'undefined') {\n\tvar _GlobalClass = ( window && window.simplestore && window.simplestore.Global ? window.simplestore.Global : null);\n}\nelse if (typeof global !== 'undefined') {\n\t// we are in node js\n\tvar _GlobalClass = ( global && global.simplestore && global.simplestore.Global ? global.simplestore.Global : null);\n}\n\n_GlobalClass.getGlobalObject().registerModuleObject(new Module());\n\n// dependencies\n_GlobalClass.getGlobalObject().registerModuleDepency('currenciesmodules', 'common');\n_GlobalClass.getGlobalObject().registerModuleDepency('currenciesmodules', 'clientmodules');\n"],"mappings":"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"}