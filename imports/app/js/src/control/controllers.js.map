{"version":3,"file":"controllers.js","names":["modulecontrollers","ModuleControllers","globalscope","window","global","module","ethereum_core","require","getObject","primus_client_wallet","clientcontrollers","primus_client_wallet_init","getGlobalObject","getExecutionEnvironment","_initdev","_globalscope","getExecutionGlobalScope","simplestore","commonmodule","getModuleObject","session_array","init","err","console","log","clientmodules","getControllersObject"],"sources":["../../../../../../../../imports/app/js/src/control/controllers.js"],"sourcesContent":["'use strict';\n\nvar modulecontrollers;\n\n\nvar ModuleControllers = class {\n\t\n\tconstructor() {\n\t\tthis.globalscope =  ((typeof window !== 'undefined') && window ? window : global);\n\n        this.module = null;\n        \n\t\tthis.ethereum_core = require('@p2pmoney-org/ethereum_core').getObject();\n\n\t\tthis.primus_client_wallet = require('@primusmoney/client_wallet').getObject();\n\n\t\tthis.global = null;\n\t\t\n\t\tthis.clientcontrollers = null;\n\t\t\n\t}\n\t\n\tasync init() {\n\n\t\t// @primusmoney/client_wallet\n\t\tvar primus_client_wallet_init = await this.primus_client_wallet_init();\n\t\t\n\t\t// finished all initializations\n\t\tthis.global = this.ethereum_core.getGlobalObject();\n\t\t\n\t\tif (this.global.getExecutionEnvironment() == 'dev') {\n\t\t\tawait this._initdev();\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\t\n\tasync _initdev() {\n\t\tvar global = this.global;\n\t\tvar _globalscope = global.getExecutionGlobalScope();\n\t\t\n\t\tif (_globalscope.simplestore) {\n\t\t\tvar commonmodule = global.getModuleObject('common');\n\n\t\t\t// to simplify access in debug window\n\t\t\t_globalscope.simplestore.session_array = commonmodule.session_array;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\t\n\t\n\tasync primus_client_wallet_init() {\n\t\tvar _globalscope = this.globalscope;\n\t\tvar primus_client_wallet = this.primus_client_wallet;\n\n/* \t\tvar Bootstrap = _globalscope.simplestore.Bootstrap;\n\t\tvar ScriptLoader = _globalscope.simplestore.ScriptLoader;\n\n\t\tvar bootstrapobject = Bootstrap.getBootstrapObject();\n\t\tvar rootscriptloader = ScriptLoader.getRootScriptLoader();\n\n\t\tvar clientglobal = _globalscope.simplestore.Global.getGlobalObject();\n\n\t\trootscriptloader.registerEventListener('@primusmoney/on_primus_client_wallet_module_ready', (eventname) => {\n\t\t\tconsole.log('WebClientControllers: primus_client_wallet initialization has finished');\n\t\t}); */\n\t\t\n\t\tvar primus_client_wallet_init = await primus_client_wallet.init()\n\t\t.catch(err => {\n\t\t\tconsole.log('error during @primusmoney/client_wallet init: ' + err);\n\t\t});\n\n\n\t\tconsole.log('@primusmoney/client_wallet init finished');\n\n\t\treturn primus_client_wallet_init;\n\t}\n\t\n\tgetClientControllers() {\n\t\tif (this.clientcontrollers)\n\t\t\treturn this.clientcontrollers;\n\t\t\n\t\tvar global = this.global;\n\n\t\tvar clientmodules =  global.getModuleObject('clientmodules');\n\t\t\n\t\tthis.clientcontrollers = clientmodules.getControllersObject();\n\t\t\n\t\treturn this.clientcontrollers;\n\t}\n\n\t\n\t\n\t// static\n\tstatic getObject() {\n\t\tif (modulecontrollers)\n\t\t\treturn modulecontrollers;\n\t\t\n\t\tmodulecontrollers = new ModuleControllers();\n\t\t\n\t\treturn modulecontrollers;\n\t}\n}\n\n//module.exports = ModuleControllers;\n// Note: webpack does not handle well import on module.exports\nexport default ModuleControllers; \n"],"mappings":"AAAA;;;;;;;;;+CACA,oJ;;;;;;;;;;;;AACA,IAAIA,iBAAJ;;AAGA,IAAIC,iBAAiB;EAEpB,6BAAc;IAAA;;IACb,KAAKC,WAAL,GAAsB,OAAOC,MAAP,KAAkB,WAAnB,IAAmCA,MAAnC,GAA4CA,MAA5C,GAAqDC,MAA1E;IAEM,KAAKC,MAAL,GAAc,IAAd;IAEN,KAAKC,aAAL,GAAqBC,OAAO,CAAC,6BAAD,CAAP,CAAuCC,SAAvC,EAArB;IAEA,KAAKC,oBAAL,GAA4BF,OAAO,CAAC,4BAAD,CAAP,CAAsCC,SAAtC,EAA5B;IAEA,KAAKJ,MAAL,GAAc,IAAd;IAEA,KAAKM,iBAAL,GAAyB,IAAzB;EAEA;;EAfmB;IAAA;IAAA;MAAA,uEAiBpB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGuC,KAAKC,yBAAL,EAHvC;;cAAA;gBAGKA,yBAHL;gBAKC;gBACA,KAAKP,MAAL,GAAc,KAAKE,aAAL,CAAmBM,eAAnB,EAAd;;gBAND,MAQK,KAAKR,MAAL,CAAYS,uBAAZ,MAAyC,KAR9C;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OASQ,KAAKC,QAAL,EATR;;cAAA;gBAAA,iCAYQ,IAZR;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAjBoB;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,2EAgCpB;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACKV,MADL,GACc,KAAKA,MADnB;gBAEKW,YAFL,GAEoBX,MAAM,CAACY,uBAAP,EAFpB;;gBAIC,IAAID,YAAY,CAACE,WAAjB,EAA8B;kBACzBC,YADyB,GACVd,MAAM,CAACe,eAAP,CAAuB,QAAvB,CADU,EAG7B;;kBACAJ,YAAY,CAACE,WAAb,CAAyBG,aAAzB,GAAyCF,YAAY,CAACE,aAAtD;gBACA;;gBATF,kCAWQ,IAXR;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAhCoB;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,4FA+CpB;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACKL,YADL,GACoB,KAAKb,WADzB;gBAEKO,oBAFL,GAE4B,KAAKA,oBAFjC;gBAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;gBAdC;gBAAA,OAgBuCA,oBAAoB,CAACY,IAArB,YAC/B,UAAAC,GAAG,EAAI;kBACbC,OAAO,CAACC,GAAR,CAAY,mDAAmDF,GAA/D;gBACA,CAHqC,CAhBvC;;cAAA;gBAgBKX,yBAhBL;gBAsBCY,OAAO,CAACC,GAAR,CAAY,0CAAZ;gBAtBD,kCAwBQb,yBAxBR;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CA/CoB;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;IAAA;IAAA,OA0EpB,gCAAuB;MACtB,IAAI,KAAKD,iBAAT,EACC,OAAO,KAAKA,iBAAZ;MAED,IAAIN,MAAM,GAAG,KAAKA,MAAlB;MAEA,IAAIqB,aAAa,GAAIrB,MAAM,CAACe,eAAP,CAAuB,eAAvB,CAArB;MAEA,KAAKT,iBAAL,GAAyBe,aAAa,CAACC,oBAAd,EAAzB;MAEA,OAAO,KAAKhB,iBAAZ;IACA,CArFmB,CAyFpB;;EAzFoB;IAAA;IAAA,OA0FpB,qBAAmB;MAClB,IAAIV,iBAAJ,EACC,OAAOA,iBAAP;MAEDA,iBAAiB,GAAG,IAAIC,iBAAJ,EAApB;MAEA,OAAOD,iBAAP;IACA;EAjGmB;;EAAA;AAAA,GAArB,C,CAoGA;AACA;;;eACeC,iB"}