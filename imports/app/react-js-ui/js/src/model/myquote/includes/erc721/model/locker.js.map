{"version":3,"file":"locker.js","names":["Locker","session","contractaddress","web3providerurl","address","contractpath","contractinstance","path","global","getGlobalObject","ethnodemodule","getModuleObject","getContractPath","getContractInstance","valstr","ethtx","fromaccount","getFromAccount","payingaccount","getPayingAccount","gas","getGas","gasPrice","getGasPrice","transactionuuid","getTransactionUUID","value","getValue","contracttransaction","getContractTransactionObject","setArguments","args","setContractTransactionUUID","setValue","setMethodName","push","method_send","client_address","params","method_call","arr","window","GlobalClass","_GlobalClass","simplestore","Global","registerModuleClass"],"sources":["../../../../../../../../../../../../../imports/app/react-js-ui/js/src/model/myquote/includes/erc721/model/locker.js"],"sourcesContent":["'use strict';\n\nvar Locker = class {\n\t\n\tconstructor(session, contractaddress, web3providerurl) {\n\t\tthis.session = session;\n\t\tthis.address = contractaddress;\n\t\t\n\t\tthis.web3providerurl = web3providerurl;\n\n\t\tthis.contractpath = './contracts/deeds_v1/Locker.json';\n\t\t\n\t\t// operating variables\n\t\tthis.contractinstance = null;\n\t}\n\n\tgetContractPath() {\n\t\treturn this.contractpath;\n\t}\n\n\tsetContractPath(path) {\n\t\tthis.contractpath = path;\n\t\tthis.contractinstance = null;\n\t}\n\t\n\tgetContractInstance() {\n\t\tif (this.contractinstance)\n\t\t\treturn this.contractinstance;\n\t\t\n\t\tvar session = this.session;\n\t\tvar global = session.getGlobalObject();\n\t\tvar ethnodemodule = global.getModuleObject('ethnode');\n\n\t\tvar contractpath = this.getContractPath();\n\t\t\n\t\tthis.contractinstance = ethnodemodule.getContractInstance(session, this.address, contractpath, this.web3providerurl);\n\t\t\n\t\treturn this.contractinstance;\n\t}\n\n\t// string value\n\tasync store(valstr, ethtx) {\n\t\tvar contractinstance = this.getContractInstance();\n\n\t\tvar fromaccount = ethtx.getFromAccount();\n\t\tvar payingaccount = ethtx.getPayingAccount();\n\n\t\tpayingaccount = (payingaccount ? payingaccount : fromaccount);\n\n\t\tvar gas = ethtx.getGas();\n\t\tvar gasPrice = ethtx.getGasPrice();\n\n\t\tvar transactionuuid = ethtx.getTransactionUUID();\n\t\tvar value = ethtx.getValue();\n\n\n\t\tvar contractinstance = this.getContractInstance();\n\t\tvar contracttransaction = contractinstance.getContractTransactionObject(payingaccount, gas, gasPrice);\n\n\t\tcontracttransaction.setArguments(args);\n\t\t\n\t\tcontracttransaction.setContractTransactionUUID(transactionuuid);\n\t\tcontracttransaction.setValue(value);\n\n\t\tcontracttransaction.setMethodName('store');\t\t\n\t\t\n\t\tvar args = [];\n\t\n\t\targs.push(valstr);\n\t\t\n\t\tcontracttransaction.setArguments(args);\n\n\t\treturn contractinstance.method_send(contracttransaction);\n\t}\n\t\n\tasync retrieve(client_address) {\n\t\tvar contractinstance = this.getContractInstance();\n\n\t\tvar params = [];\n\t\n\t\tparams.push(client_address);\n\t\t\n\t\tconst valstr = await contractinstance.method_call('retrieve', params);\n\t\t\n\t\treturn valstr;\n\t}\n\t\n\t// array of strings\n\tasync register(valstr, ethtx) {\n\t\tvar contractinstance = this.getContractInstance();\n\n\t\tvar fromaccount = ethtx.getFromAccount();\n\t\tvar payingaccount = ethtx.getPayingAccount();\n\n\t\tpayingaccount = (payingaccount ? payingaccount : fromaccount);\n\n\t\tvar gas = ethtx.getGas();\n\t\tvar gasPrice = ethtx.getGasPrice();\n\n\t\tvar transactionuuid = ethtx.getTransactionUUID();\n\t\tvar value = ethtx.getValue();\n\n\n\t\tvar contractinstance = this.getContractInstance();\n\t\tvar contracttransaction = contractinstance.getContractTransactionObject(payingaccount, gas, gasPrice);\n\n\t\tcontracttransaction.setArguments(args);\n\t\t\n\t\tcontracttransaction.setContractTransactionUUID(transactionuuid);\n\t\tcontracttransaction.setValue(value);\n\n\t\tcontracttransaction.setMethodName('register');\t\t\n\t\t\n\t\tvar args = [];\n\t\n\t\targs.push(valstr);\n\n\t\tcontracttransaction.setArguments(args);\n\t\t\n\t\treturn contractinstance.method_send(contracttransaction);\n\t}\n\t\n\tasync fetch(client_address) {\n\t\tvar contractinstance = this.getContractInstance();\n\n\t\tvar params = [];\n\t\n\t\tparams.push(client_address);\n\t\t\n\t\tconst arr = await contractinstance.method_call('fetch', params);\n\t\t\n\t\treturn arr;\n\t}\n\t\n}\n\nif ( typeof window !== 'undefined' && typeof window.GlobalClass !== 'undefined' && window.GlobalClass ) {\n\tvar _GlobalClass = window.GlobalClass;\n}\nelse if (typeof window !== 'undefined') {\n\tvar _GlobalClass = ( window && window.simplestore && window.simplestore.Global ? window.simplestore.Global : null);\n}\nelse if (typeof global !== 'undefined') {\n\t// we are in node js\n\tvar _GlobalClass = ( global && global.simplestore && global.simplestore.Global ? global.simplestore.Global : null);\n}\n\n_GlobalClass.registerModuleClass('mvc-erc721', 'Locker', Locker);\n\n"],"mappings":"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"}