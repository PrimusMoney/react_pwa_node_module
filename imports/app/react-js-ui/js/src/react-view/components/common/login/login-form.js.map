{"version":3,"file":"login-form.js","names":["LoginForm","props","app","getMvcModuleObject","getMvcMyQuoteObject","username","password","nav_state_params","logging_pending","getVariable","closing","login_scheme_list_webapp","login_scheme_list_dev","default_local_schemeuuid","state","processinginfo","processing","schemeuuid","loaded","message","supportdisclaimer","setState","prevProps","prevState","console","log","mvcmodule","_setState","mvcmyquote","t","checkNavigationState","err","rootsessionuuid","loadConfig","getDefaultLocalSchemeInfo","localscheme","uuid","app_nav_state","getNavigationState","app_nav_target","target","route","reached","params","startconditions","urlParams","txhash","get","currencyuuid","sessionuuid","walletforscheme_treating","setProcessing","_getWalletForScheme","wallet","postLogin","walletforscheme_treated","resetHref","getStartDataObject","dataobj","viewed","dataobject","gotoMyQuotePage","onEmptyStartDataObject","bChoice","setVariable","childsessionuuid","_doFetchWalletList","walletlist","i","length","name","getWalletInfo","walletinfo","persistedwallet","makeWallet","alert","_doOpenWallet","unlocked","makeWalletFromSession","attachSessionToWallet","currentwalletname","currentwallet","currentwalletuuid","walletname","walletuuid","doSetWallet","_doCheckWalletLock","islocked","result","Promise","resolve","reject","doFetchWalletList","res","doModifyWallet","configurl","authname","options","doImportWallet","doOpenWallet","doCheckWalletLock","mode","action","getStartParameters","start_parameters","gotoRoute","_previous_app_state","_getPreviousNavigationState","servicename","createChildSession","getCleanUrl","cleanurl","redirectappurl","actionparams","_root","dataobject_routes","_getDataObjectRoutes","includes","_keys","Object","keys","client","closewindow","appurl","oauth2AuthorizeUrl","authorizeurl","gotoUrl","item","type","credentials","push","invokeAsyncHooks","ret","automatic_submit","onSubmit","oauth2Login","provider","e","value","bind","label","image","facebooklogin","googlelogin","schemeList","exec_env","image_schemes","label_schemes","_schemeList","concat","boot_webapp","getConfig","logins_config","logins","disabled","disable","filter","scheme","_getLoginSchemeList","onClickItem","renderItem","_isCredentialsScheme","renderLoginForm","renderAuthList","React","Component","propTypes","PropTypes","object","isRequired","string","isLoginPending","bool","isLoggedIn","func","doLockWallet","resetWallet","mapStateToProps","session","login","pending","success","lasterror","error","wallets","mapDispatchToProps","dispatch","callback","connect"],"sources":["../../../../../../../../../../../../imports/app/react-js-ui/js/src/react-view/components/common/login/login-form.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\n\nimport Image from 'react-bootstrap/Image';\n\nimport { Dots } from 'react-activity';\nimport 'react-activity/dist/react-activity.css';\n\nimport PropTypes from 'prop-types';\n\nimport facebooklogin from \"../../../../../../assets/facebook-login-573x102.png\"\nimport googlelogin from \"../../../../../../assets/google-login-573x102.png\"\n\n\nimport List from '../../utils/list.js'\n\n\nimport { doFetchWalletList, doImportWallet, doModifyWallet, doOpenWallet, doLockWallet, doCheckWalletLock, resetWallet, doSetWallet } from '@primusmoney/react_client_wallet/imports/view/actions/wallet/wallet-actions.js';\n\n\n\n\nclass LoginForm extends React.Component {\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.app = this.props.app;\n\t\tthis.getMvcModuleObject = this.app.getMvcModuleObject;\n\t\tthis.getMvcMyQuoteObject = this.app.getMvcMyQuoteObject;\n\t\t\n\t\tlet username = '';\n\t\tlet password = '';\n\n\t\tthis.nav_state_params = null;\n\n\t\tlet logging_pending = this.app.getVariable('logging_pending');\n\t\t\n\t\tthis.closing = false;\n\n\t\tthis.login_scheme_list_webapp = null;\n\t\tthis.login_scheme_list_dev = null;\n\n\t\tthis.default_local_schemeuuid = null;\n\t\t\n\t\tthis.state = {\n\t\t\t\tprocessinginfo: 'processing authentication',\n\t\t\t\tprocessing: (logging_pending ? true : false),\n\t\t\t\tschemeuuid: null,\n\t\t\t\tusername: username,\n\t\t\t\tpassword: password,\n\t\t\t\tloaded: false,\n\t\t\t\tmessage: '',\n\t\t\t\tsupportdisclaimer: ''\n\t\t}\n\t}\n\n\t_setState(state) {\n\t\tif (this.closing !== true)\n\t\tthis.setState(state);\n\t}\n\n\t// post render commit phase\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconsole.log('LoginForm.componentDidUpdate called');\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\n\t\tlet logging_pending = this.app.getVariable('logging_pending');\n\t\tif ( this.state.processing && (this.state.processing != logging_pending)) {\n\t\t\tthis._setState({processing: false});\n\t\t}\n\n\t}\n\n\tcomponentDidMount() {\n\t\tconsole.log('LoginForm.componentDidMount called');\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet supportdisclaimer = mvcmyquote.t('This webapp has only been tested for Chrome on Android. \\\n\t\t\t\t\t\t\t\t\t\t\t\tIt may not work for other environments \\\n\t\t\t\t\t\t\t\t\t\t\t\t(and actually does not in certain cases e.g. FireFox).')\n\n\t\tthis._setState({supportdisclaimer});\n\t\t\n\t\tthis.checkNavigationState().catch(err => {console.log('error in LoginForm.checkNavigationState: ' + err);});\n\t}\n\t\n\tasync checkNavigationState() {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\n\t\t// load additional login for webapp and dev\n\t\tthis.login_scheme_list_webapp = await mvcmyquote.loadConfig('login-webapp');\n\t\tthis.login_scheme_list_dev = await mvcmyquote.loadConfig('login-dev');\n\n\t\t// get uuid of local default\n\t\tlet localscheme = await mvcmyquote.getDefaultLocalSchemeInfo(rootsessionuuid);\n\t\tthis.default_local_schemeuuid = localscheme.uuid;\n\n\n\n\t\t// look if a transaction is defined in the url\n\t\tlet app_nav_state = this.app.getNavigationState();\n\t\tlet app_nav_target = app_nav_state.target;\n\n\n\t\tif (app_nav_target && (app_nav_target.route == 'login') && (app_nav_target.reached == false)) {\n\t\t\tconsole.log('LoginForm.checkNavigationState target reached');\n \t\t\t// we want to login before completing previous route\n\t\t\tthis.nav_state_params = app_nav_target.params;\n\n\t\t\t// we reset processing and logging_pending in case they're not clean\n\t\t\t//await this.setProcessing(false);\n\n\t\t\tapp_nav_target.reached = true;\n\t\t}\n\t\telse {\n\t\t\tconsole.log('LoginForm.checkNavigationState starting from a clean slate');\n \n\t\t\t// starting from a clean slate\n\t\t\tlet startconditions = this.app.getVariable('start_conditions');\n\t\t\tlet urlParams = startconditions.urlParams;\n\t\n\t\t\tif (urlParams) {\n\t\t\t\tlet txhash = urlParams.get('tx');\n\t\t\t\tlet currencyuuid = urlParams.get('ccy');\n\t\t\t\t\n\t\t\t\tlet sessionuuid = urlParams.get('sessionuuid');\n\t\t\t\tlet schemeuuid = urlParams.get('schemeuuid');\n\t\n\t\t\t\tif (sessionuuid) {\n\t\t\t\t\t// we need to reconnect to a pre-existing\n\t\t\t\t\t// (e.g. coming back from oauth2 authentication)\n\t\t\t\t\tconsole.log('LoginForm.checkNavigationState reconnecting to session:'  + sessionuuid);\n\t\n\t\t\t\t\tif (schemeuuid) {\n\t\t\t\t\t\tvar params = {sessionuuid, schemeuuid};\n\t\n\t\t\t\t\t\tif (startconditions.walletforscheme_treating !== true ) {\n\t\t\t\t\t\t\tconsole.log('LoginForm.checkNavigationState looking for a wallet for scheme ' + schemeuuid);\n\t\t\t\t\t\t\tstartconditions.walletforscheme_treating = true;\n\n\t\t\t\t\t\t\t// set processing flag on\n\t\t\t\t\t\t\tawait this.setProcessing(true);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar wallet = await this._getWalletForScheme(params)\t\t\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t\t\t\t\t});\n\t\t\n\t\t\t\t\t\t\tif (wallet) {\n\t\t\t\t\t\t\t\tconsole.log('LoginForm.checkNavigationState found wallet for session:'  + sessionuuid);\n\t\t\t\t\t\t\t\tawait this.postLogin('bootstrap');\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tstartconditions.walletforscheme_treated = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tconsole.log('LoginForm.checkNavigationState reset url, could not find wallet for session:'  + sessionuuid)\n\t\t\t\t\t\t\t\t// we restart on a clean url\n\t\t\t\t\t\t\t\tawait this.app.resetHref();\n\t\t\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (txhash && currencyuuid) {\n\t\t\t\t\t\tlet dataobj = await this.app.getStartDataObject()\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tconsole.log('error calling App.getStartDataObject: ' + err);\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tif (dataobj) {\n\t\t\t\t\t\t\tif (dataobj.viewed !== true) {\n\t\t\t\t\t\t\t\tlet params = {dataobject: dataobj};\n\t\t\t\t\t\t\t\tawait this.app.gotoMyQuotePage(params)\n\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.log('error calling App.gotoMyQuotePage: ' + err);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// we ask root\n\t\t\t\t\t\t\tawait this.app.onEmptyStartDataObject(txhash, currencyuuid)\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\tconsole.log('error calling App.onEmptyStartDataObject: ' + err);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconsole.log('LoginForm.checkNavigationState loaded');\n\t\tthis._setState({loaded: true});\n\t}\n\n\t// end of life\n\tcomponentWillUnmount() {\n\t\tconsole.log('LoginForm.componentWillUnmount called');\n\n\t\tthis.closing = true;\n\t}\n\t\n\n\tasync setProcessing(bChoice) {\n\t\tconsole.log('LoginForm.setProcessing called with:' + bChoice);\n\n\t\tif (bChoice) {\n\t\t\tthis.app.setVariable('logging_pending', true);\n\t\t\tthis._setState({processing: true});\n\t\t}\n\t\telse {\n\t\t\tthis.app.setVariable('logging_pending', false);\n\t\t\tthis._setState({processing: false});\n\t\t}\n\n\t}\n\n\tasync _getWalletForScheme(params) {\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\t\t\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\t\n\t\tlet childsessionuuid = params.sessionuuid;\n\t\tlet schemeuuid = params.schemeuuid;\n\t\tlet username = params.username;\n\t\tlet password = params.password;\n\n\n\t\tlet walletlist = await this._doFetchWalletList(mvcmodule, rootsessionuuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t});\n\n\t\tvar persistedwallet;\n\n\t\tfor (var i = 0; i < walletlist.length; i++) {\n\t\t\tvar wallet = walletlist[i];\n\t\t\tif ( username && (wallet.name !== username)) {continue;}\n\n\t\t\tvar walletinfo = await mvcmyquote.getWalletInfo(rootsessionuuid, wallet.uuid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t});\n\n\t\t\tif (walletinfo && (walletinfo.schemeuuid === schemeuuid)) {\n\t\t\t\tpersistedwallet = walletinfo;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (username && password) {\n\t\t\t// with credentials\n\n\t\t\t// no wallet persisted yet\n\t\t\tif (!persistedwallet) {\n\t\t\t\t// we create a wallet\n\t\t\t\tpersistedwallet = await mvcmyquote.makeWallet(rootsessionuuid, username, schemeuuid, password)\t\t\t\t\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tif (!persistedwallet) {\n\t\t\t\tthis.app.alert('Could not create wallet with these credentials');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet unlocked =  await this._doOpenWallet(mvcmodule, rootsessionuuid, persistedwallet.uuid, persistedwallet.name, password)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t});\n\t\n\t\t\tif (!unlocked) {\n\t\t\t\tconsole.log('LoginForm._getWalletForScheme wallet authentication failed');\n\t\t\t\treturn;\n\t\t\t}\t\n\t\n\t\t}\n\t\telse {\n\t\t\t// alternative mode\n\t\t\t// (only oauth2 for the moement)\n\n\t\t\t// no wallet persisted yet\n\t\t\tif (!persistedwallet) {\n\t\t\t\t// we create a wallet\n\t\t\t\tpersistedwallet = await mvcmyquote.makeWalletFromSession(childsessionuuid, schemeuuid)\t\t\t\t\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// we attach the session to the wallet\n\t\t\t\tawait mvcmyquote.attachSessionToWallet(childsessionuuid, persistedwallet.uuid)\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tif (!persistedwallet) {\n\t\t\t\tthis.app.alert('Could not create wallet for oauth2');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// synchronize redux\n\t\t\tvar currentwalletname = this.props.currentwallet;\n\t\t\tvar currentwalletuuid = this.props.currentwalletuuid;\n\n\t\t\tvar walletname = persistedwallet.name;\n\t\t\tvar walletuuid = persistedwallet.uuid;\n\n\t\t\tif ((currentwalletname != walletname) || (currentwalletuuid ==walletuuid ))\n\t\t\tthis.props.doSetWallet(walletname, walletuuid);\n\n\t\t\tconst islocked = await this._doCheckWalletLock(mvcmodule, rootsessionuuid, walletuuid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in LoginForm._getWalletForScheme:' + err);\n\t\t\t});\n\t\t}\n\n\t\t\n\t\treturn persistedwallet;\n\t}\n\t\t\t\t\n\t// user actions\n\tasync _doFetchWalletList(mvcmodule, sessionuuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doFetchWalletList(mvcmodule, sessionuuid, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\t\n\tasync _doModifyWallet(mvcmodule, sessionuuid, walletuuid, walletinfo) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doModifyWallet(mvcmodule, sessionuuid, walletuuid, walletinfo, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\t\n\tasync _doImportWallet(mvcmodule, sessionuuid, configurl, authname, password, options) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doImportWallet(mvcmodule, sessionuuid, configurl, authname, password, options, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\t\n\tasync _doOpenWallet(mvcmodule, sessionuuid, walletuuid, walletname, password) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doOpenWallet(mvcmodule, sessionuuid, walletuuid, walletname, password, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync _doCheckWalletLock(mvcmodule, sessionuuid, walletuuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doCheckWalletLock(mvcmodule, sessionuuid, walletuuid, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync postLogin(mode) {\n\t\tconsole.log('LoginForm.postLogin called with mode: ' + (mode ? mode : 'unknown'));\n\n\t\tif (mode == 'bootstrap') {\n\t\t\t// starting with bias for dataobjects\n\t\t\tlet dataobj = await this.app.getStartDataObject()\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error calling App.getStartDataObject: ' + err);\n\t\t\t});\n\n\t\t\tif (dataobj) {\n\t\t\t\tif (dataobj.viewed !== true) {\n\t\t\t\t\tlet params = {action: 'view', dataobject: dataobj};\n\n\t\t\t\t\tawait this.app.gotoMyQuotePage(params)\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log('error calling App.gotoMyQuotePage: ' + err);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet start_parameters = await this.app.getStartParameters();\n\n\t\t\t\tif (start_parameters.route) {\n\t\t\t\t\tawait this.app.gotoRoute(start_parameters.route, start_parameters);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tawait this.app.gotoRoute('home');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// action to complete\n\t\t\tlet nav_state_params = this.nav_state_params;\n\n\t\t\tlet _previous_app_state = this.app._getPreviousNavigationState();\n\t\t\tlet target = (_previous_app_state ? _previous_app_state['target'] : null);\n\n\t\t\tif (target && target.route && target.params){\n\t\t\t\tif (!target.params.action)\n\t\t\t\ttarget.params.action = (nav_state_params && nav_state_params.action ? nav_state_params.action : 'create');\n\n\t\t\t\tawait this.app.gotoRoute(target.route, target.params);\n\t\t\t}\n\n\t\t}\n\t\t\n\t\tawait this.setProcessing(false);\n\t}\n\n\n\n\tasync onSubmit() {\n\t\tconsole.log('LoginForm.onSubmit pressed!');\n\t\t\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\t\n\t\tlet { schemeuuid, username, password } = this.state;\n\n\t\tvar params = {};\n\n\t\tparams.schemeuuid = schemeuuid;\n\t\tparams.username = username;\n\t\tparams.password = password;\n\n\n\t\tvar wallet = await this._getWalletForScheme(params)\t\t\n\t\t.catch(err => {\n\t\t\tconsole.log('error in LoginForm.onSubmit:' + err);\n\t\t});\n\n\t\tif (!wallet) {\n\t\t\tconsole.log('LoginForm.onSubmit login failed');\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log('logged in successful');\n\n\t\tawait this.postLogin();\n\t}\n\n\tasync oauth2Login(servicename, schemeuuid) {\n\t\tconsole.log('LoginForm.oauth2Login called');\n\t\t\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\n\t\tlet childsessionuuid = await mvcmyquote.createChildSession(rootsessionuuid);\n\n\t\t// redirect\n\t\tvar cleanurl = await this.app.getCleanUrl();\n\n\t\tlet redirectappurl = cleanurl;\n\n\t\t// oauth2 authentication part\n\t\tredirectappurl += '?sessionuuid=' + childsessionuuid;\n\t\tredirectappurl += '&schemeuuid=' + schemeuuid;\n\n\t\t// action to complete\n\t\tlet _previous_app_state = this.app._getPreviousNavigationState();\n\t\tlet target = (_previous_app_state ? _previous_app_state['target'] : null);\n\n\t\tif (target && target.route && target.params){\n\t\t\tlet actionparams = target.params;\n\n\t\t\tlet _root = this.app.getVariable('Root');\n\t\t\tlet dataobject_routes = _root._getDataObjectRoutes();\n\n\t\t\tif ((dataobject_routes.includes(target.route) !== true)) {\n\t\t\t\tlet _keys = Object.keys(actionparams);\n\n\t\t\t\tfor (var i = 0; i < _keys.length; i++) {\n\t\t\t\t\tredirectappurl += '&' +  _keys[i] + '=' + actionparams[_keys[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (actionparams.txhash && actionparams.currencyuuid) {\n\t\t\t\t\tredirectappurl += '&route=' + target.route;\n\t\t\t\t\tredirectappurl += '&tx=' + actionparams.txhash;\n\t\t\t\t\tredirectappurl += '&ccy=' + actionparams.currencyuuid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet params = {client: 'web', closewindow: '0', appurl: redirectappurl};\n\t\t//var params = {client: 'web', closewindow: '0', appurl: 'none'};\n\n\t\tlet authorizeurl = await mvcmyquote.oauth2AuthorizeUrl(childsessionuuid, schemeuuid, params)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in LoginForm.oauth2Login:' + err);\n\t\t});\n\n\t\tawait this.setProcessing(true);\n\n\t\t// jump\n\t\tawait this.app.gotoUrl(authorizeurl);\n\t}\n\n\tasync onClickItem(item) {\n\t\tlet type = item.type;\n\t\tlet schemeuuid = item.uuid;\n\n\t\tthis._setState({schemeuuid});\n\n\t\tif (item.credentials === true) {\n\t\t\t// we give a chance for hooks to fill the credentials\n\t\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\t\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\n\n\t\t\tvar result = []; \n\t\t\tvar params = [];\n\t\n\t\t\tparams.push(rootsessionuuid);\n\t\t\tparams.push(item);\n\t\n\t\t\tlet ret = await mvcmyquote.invokeAsyncHooks('getLoginCredentials_asynchook', result, params);\n\t\n\t\t\tif (ret && result.credentials) {\n\t\t\t\tthis._setState({username: result.credentials.username, password: result.credentials.password, schemeuuid: result.credentials.schemeuuid});\n\n\t\t\t\t// call onSubmit if requested\n\t\t\t\tif (result.credentials.automatic_submit !== false) // default is automatic submit\n\t\t\t\tawait this.onSubmit();\n\t\t\t}\n\t\t}\n\n\n\t\tswitch(type) {\n\t\t\tcase 0: {\n\t\t\t\t// local\n\t\t\t\tif (item.credentials !== true) {\n\t\t\t\t\treturn Promise.reject('alernative authentication mode to with credentials not supported for local authentication');\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\tdefault: {\n\t\t\t\t// remote\n\t\t\t\tif (item.credentials !== true) {\n\t\t\t\t\t// alternative remote mode\n\t\t\t\t\tswitch(item.mode) {\n\t\t\t\t\t\tcase 'oauth2':\n\t\t\t\t\t\t\tawait this.oauth2Login(item.provider, schemeuuid);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn Promise.reject('authentication mode is not supported: ' + item.mode);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t}\n\n\t\n\t// rendering\n\trenderLoginForm() {\n\t\tlet { username, password } = this.state;\n\t\t\n\t\treturn (\n\t\t\t<div className=\"Form\">\n\t\t\t\t<FormGroup controlId=\"username\">\n\t\t\t\t  <FormLabel>User</FormLabel>\n\t\t\t\t  <FormControl\n\t\t\t\t\tautoFocus\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tvalue={username}\n\t\t\t\t\tonChange={e => this._setState({username: e.target.value})}\n\t\t\t\t  />\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup controlId=\"password\">\n\t\t\t\t  <FormLabel>Password</FormLabel>\n\t\t\t\t  <FormControl\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={e => this._setState({password: e.target.value})}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t  />\n\t\t\t\t</FormGroup>\n\t\t\t\t<Button onClick={this.onSubmit.bind(this)} type=\"submit\">\n\t\t\t\t  Login\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t  );\n\t}\n\n\trenderItem(item){\n\t\tlet type = item.type;\n\t\tlet label = item.label;\n\n\t\tif (item.image) {\n\t\t\t// display a logo\n\t\t\tswitch(item.name) {\n\t\t\t\t// built-in\n\t\t\t\tcase 'facebook':\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Image src={facebooklogin} fluid />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\n\t\t\t\tcase 'google':\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Image src={googlelogin} fluid />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\n\t\t\t\t// webapp additional\n\t\t\t\tdefault:\n\t\t\t\t\t// path in item.image\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Image src={item.image} fluid />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// standard text line\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<span>{label}</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\n\t}\n\n\t_getLoginSchemeList() {\n\t\t// built-in logins\n\n\t\t/*let schemeList = [\n\t\t\t{name: 'facebook', label: 'facebook', image: 'inline', type: 1, mode: 'oauth2', provider: 'facebook', uuid: 'd8dbb10e-a478-e52c-b96b-29af6f48ae9b'}, \n\t\t\t{name: 'google', label: 'google', image: 'inline', type: 1, mode: 'oauth2', provider: 'google', uuid: '47b0806f-c3fa-65f6-b356-8715a2bcfa0c'},\n\t\t\t{name: 'primusmoney', label: 'connect with primus money', type: 1, credentials: true, uuid: 'd3b4fa61-ed65-11f6-4877-b169441dbe58'}\n\t\t];*/\n\n\t\tlet schemeList = [\n\t\t\t{name: 'facebook', label: 'facebook', image: 'inline', type: 1, mode: 'oauth2', provider: 'facebook', uuid: 'd8dbb10e-a478-e52c-b96b-29af6f48ae9b'}, \n\t\t\t{name: 'primusmoney', label: 'connect with a primus money account', type: 1, credentials: true, uuid: 'd3b4fa61-ed65-11f6-4877-b169441dbe58'}\n\t\t];\n\n\t\t// webapp additional logins\n\t\tif (this.login_scheme_list_webapp) {\n\t\t\tfor (var i = 0; i < this.login_scheme_list_webapp.length; i++) {\n\t\t\t\tschemeList.push(this.login_scheme_list_webapp[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (this.app.exec_env === 'dev') {\n\t\t\t// only for dev\n\t\t\tif (this.login_scheme_list_dev) {\n\t\t\t\tfor (var i = 0; i < this.login_scheme_list_dev.length; i++) {\n\t\t\t\t\tschemeList.push(this.login_scheme_list_dev[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// put schemes with image first\n\t\tlet image_schemes = [];\n\t\tlet label_schemes = [];\n\n\t\tfor (var i = 0; i < schemeList.length; i++) {\n\t\t\tif (schemeList[i].image)\n\t\t\t\timage_schemes.push(schemeList[i]);\n\t\t\telse\n\t\t\t\tlabel_schemes.push(schemeList[i]);\n\t\t}\n\n\t\tlet _schemeList = image_schemes.concat(label_schemes);\n\n\t\t// filter login schemes that have been disabled (if any)\n\t\tconst boot_webapp = this.app.getConfig();\n\t\tconst logins_config = boot_webapp.logins;\n\t\tconst disabled = (logins_config && logins_config.disable ? logins_config.disable : []);\n\n\t\tif (disabled && disabled.length) {\n\t\t\t_schemeList = _schemeList.filter(scheme => disabled.includes(scheme.name) !== true);\n\t\t}\n\n\t\treturn _schemeList;\n\t}\n\n\t_isCredentialsScheme(schemeuuid) {\n\t\tif (!schemeuuid)\n\t\t\treturn false;\n\n\t\tlet scheme;\n\t\tlet schemeList = this._getLoginSchemeList();\n\n\t\tfor (var i = 0; i < schemeList.length; i++) {\n\t\t\tif (schemeList[i].uuid === schemeuuid) {\n\t\t\t\tscheme = schemeList[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!scheme) {\n\t\t\t// check if it is the default local scheme\n\t\t\tif (schemeuuid === this.default_local_schemeuuid)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif (scheme.credentials === true)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\trenderAuthList() {\n\t\tlet schemeList = this._getLoginSchemeList();\n\n\t\treturn (\n\t\t\t<List items={schemeList} onClickItem={(item) => this.onClickItem(item)} render={(item) => this.renderItem(item)} />\n\t\t);\n\n\t}\n\t\n\n\trender() {\n\t\tlet {loaded, processing, supportdisclaimer, schemeuuid} = this.state;\n\n\t\t// initial\n \t\tif (loaded !== true) {\n\t\t\treturn (\n\t\t\t\t<div className=\"Splash\">\n\t\t\t\t\t<div>{this.state.processinginfo}</div>\n\t\t\t\t\t<Dots />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t// during processing of submit\n\t\tif (processing === true) {\n\t\t\treturn (\n\t\t\t\t<div className=\"Splash\">\n\t\t\t\t\t<div>{this.state.processinginfo}</div>\n\t\t\t\t\t<Dots />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<div className=\"Container LoginContainer\">\n\t\t\t\t<div className=\"AuthBox\">\n\t\t\t\t{ (this._isCredentialsScheme(schemeuuid) ?\n\t\t\t\tthis.renderLoginForm() : \n\t\t\t\tthis.renderAuthList())}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"SupportDisclaimerBox\">{supportdisclaimer}</div>\n\t\t\t</div>\n\t\t  );\n\t}\n\t\n}\n\n\n// propTypes validation\nLoginForm.propTypes = {\n\tapp: PropTypes.object.isRequired,\n\trootsessionuuid: PropTypes.string,\n\tisLoginPending: PropTypes.bool,\n\tisLoggedIn: PropTypes.bool,\n\tcurrentwallet: PropTypes.string,\n\tcurrentwalletuuid: PropTypes.string,\n\tdoFetchWalletList: PropTypes.func.isRequired,\n\tdoImportWallet: PropTypes.func.isRequired,\n\tdoModifyWallet: PropTypes.func.isRequired,\n\tdoOpenWallet: PropTypes.func.isRequired,\n\tdoLockWallet: PropTypes.func.isRequired,\n\tdoCheckWalletLock: PropTypes.func.isRequired,\n\tresetWallet: PropTypes.func.isRequired,\n\tdoSetWallet: PropTypes.func.isRequired,\n};\n\n//redux\nconst mapStateToProps = (state) => {\n\treturn {\n\t\trootsessionuuid: state.session.sessionuuid,\n\t\tisLoginPending: state.login.pending,\n\t\tisLoggedIn: state.login.success,\n\t\tlasterror: state.login.error,\n\t\tcurrentwallet: state.wallets.walletname,\n\t\tcurrentwalletuuid: state.wallets.walletuuid,\n\t};\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tdoFetchWalletList: (mvcmodule, sessionuuid, callback) => dispatch(doFetchWalletList(mvcmodule, sessionuuid, callback)),\n\t\tdoImportWallet: (mvcmodule, sessionuuid, configurl, authname, password, options, callback) => dispatch(doImportWallet(mvcmodule, sessionuuid, configurl, authname, password, options, callback)),\n\t\tdoModifyWallet: (mvcmodule, sessionuuid, walletuuid, walletinfo, callback) => dispatch(doModifyWallet(mvcmodule, sessionuuid, walletuuid, walletinfo, callback)),\n\t\tdoOpenWallet: (mvcmodule, session, walletuuid, walletname, password, callback) => dispatch(doOpenWallet(mvcmodule, session, walletuuid, walletname, password, callback)),\n\t\tdoLockWallet: () => dispatch(doLockWallet()),\n\t\tresetWallet: () => dispatch(resetWallet()),\n\t\tdoSetWallet: (walletname, walletuuid) => dispatch(doSetWallet(walletname, walletuuid)),\n\t\tdoCheckWalletLock: (mvcmodule, sessionuuid, walletuuid, callback) => dispatch(doCheckWalletLock(mvcmodule, sessionuuid, walletuuid, callback)),\n\t};\n}\n\n\nexport {LoginForm};\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n\n"],"mappings":"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"}