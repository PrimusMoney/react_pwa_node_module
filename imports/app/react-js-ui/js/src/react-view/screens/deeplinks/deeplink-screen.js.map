{"version":3,"file":"deeplink-screen.js","names":["DeepLinkScreen","props","app","getMvcModuleObject","state","url","prevProps","console","log","app_nav_state","getNavigationState","app_nav_target","target","route","reached","params","setState","app_start_conditions","getVariable","urlParams","_url","_encodedurl","get","startsWith","decodebase64","substring","decodehex","gotoUrl","e","value","onGotoLink","bind","renderDeepLinkForm","nextProps","prevState","rootsessionuuid","React","Component","propTypes","PropTypes","object","isRequired","mapStateToProps","mapDispatchToProps","dispatch","connect"],"sources":["../../../../../../../../../../../imports/app/react-js-ui/js/src/react-view/screens/deeplinks/deeplink-screen.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport PropTypes from 'prop-types';\n\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\n\n\nimport Header from '../../navigation/header/header.js';\n\n\n\nclass DeepLinkScreen extends React.Component {\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.app = this.props.app;\n\t\tthis.getMvcModuleObject = this.app.getMvcModuleObject;\n\n\t\tthis.state = {\n\t\t\turl: ''\n\t\t};\t\t\n\t}\n\t\n\tcomponentDidMount(prevProps) {\n\t\tconsole.log('DeepLinkScreen.componentDidMount called');\n\n\t\tlet app_nav_state = this.app.getNavigationState();\n\t\tlet app_nav_target = app_nav_state.target;\n\n\t\tif (app_nav_target && (app_nav_target.route == 'deeplink') && (app_nav_target.reached == false)) {\n\t\t\t// we want to login before completing previous route\n\t\t\tlet params = app_nav_target.params;\n\n\t\t\tif (params && params.url) {\n\t\t\t\tthis.setState({url: params.url});\n\t\t\t}\n\n\t\t\tapp_nav_target.reached = true;\n\t   }\n\t   else {\n\t\t\t// direct call from browser\n\t\t\tlet app_start_conditions = this.app.getVariable('start_conditions');\n\t\t\tlet urlParams = app_start_conditions.urlParams;\n\n\t\t\tlet _url;\n\t\t\tlet _encodedurl = urlParams.get('linkurl');\n\n\t\t\tif (_encodedurl) {\n\t\t\t\tif (_encodedurl.startsWith('b64_'))\n\t\t\t\t\t_url = this.app.decodebase64(_encodedurl.substring(4));\n\t\t\t\telse if (_encodedurl.startsWith('hex_'))\n\t\t\t\t\t_url = this.app.decodehex(_encodedurl.substring(4));\n\n\t\t\t\tthis.setState({url: _url});\n\t\t\t}\n\n\t   }\n\t\t\n\t}\n\t\n\tasync onGotoLink() {\n\t\tconsole.log('DeepLinkScreen.onGotoLink pressed!');\n\n\t\tlet {url} = this.state;\n \n\t\tawait this.app.gotoUrl(url);\n\t}\n\n\trenderDeepLinkForm() {\n\t\tlet {url} = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"Container\">\n\t\t\t\t<div className=\"Instructions\">You can enter a link that you have received by mail or have copied from the web.\n\t\t\t\t\tPressing the button will lead you to the corresponding page.</div>\n\t\t\t\t<div className=\"Form\">\n\t\t\t\t\t<FormGroup controlId=\"url\">\n\t\t\t\t\t<FormLabel>Url</FormLabel>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={url}\n\t\t\t\t\t\tonChange={e => this.setState({url: e.target.value})}\n\t\t\t\t\t/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Button onClick={this.onGotoLink.bind(this)} type=\"submit\">\n\t\t\t\t\t\tGo\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\t\t\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"Screen\">\n\t\t\t\t<Header app = {this.app}/>\n\t\t\t\t{this.renderDeepLinkForm()}\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\t// fill state\n\t\treturn {\n\t\t\trootsessionuuid: nextProps.rootsessionuuid,\n\t\t};\n\t}\n}\n\n// propTypes validation\nDeepLinkScreen.propTypes = {\n\tapp: PropTypes.object.isRequired\n};\n\n//redux\nconst mapStateToProps = (state) => {\n\treturn {\n\t};\n} \n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t};\n}\n\n\nexport {DeepLinkScreen};\nexport default connect(mapStateToProps, mapDispatchToProps)(DeepLinkScreen);"],"mappings":"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"}