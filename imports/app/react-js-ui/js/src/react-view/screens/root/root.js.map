{"version":3,"file":"root.js","names":["RouteHistory","root","todo","pop","path","last","length","unshift","setState","console","log","history","push","_setState","targetpath","Root","props","app","getMvcModuleObject","getMvcMyQuoteObject","uuid","guid","routehistory","closingwallet","devicewalletuuid","state","loading","iSessionPending","isLoggedIn","hasFatalError","fatalError","json","Promise","resolve","reject","err","res","prevProps","mvcmodule","rootsessionuuid","isSessionPending","doFetchBlankSession","now","Date","lastcheck","lastLoggedInCheck","loggedInCheckPending","doCheckLoggedIn","sessionuuid","result","doCheckSession","walletuuid","doCheckWalletLock","walletname","password","doOpenWallet","doSetWallet","mvcmyquote","checkOnline","currentwalletuuid","iswalletlocked","_doCheckWalletLock","error","doResetWallet","islocked","_doOpenWallet","_doSetWallet","readSettings","devicewllt","getWalletInfo","_walletuuid","closedevicewalletpromise","closed","_getDeviceWallet","devicewallet","getDefaultLocalSchemeInfo","localscheme","localschemeuuid","makeWallet","putSettings","openingdevicewallet","opendevicewalletpromise","_openDeviceWalletPromise","_devicewalletuuid","lockWallet","then","carduuid","doOpenCard","doResetCard","success","_doOpenCard","currencyuuid","getCurrencyCard","card","signingkey","options","isValidPrivateKey","validprivatekey","createCurrencyCard","allow_readonly","isValidAddress","validaddress","createReadOnlyCurrencyCard","alert","maincard","setCurrencyCard","boot_webapp","schemes","getCurrencyScheme","schemeinfo","schemesoverload","Object","values","i","ethnodeserver","feelevel","web3providerurl","createCard","schemeuuid","address","getCardInfoFromAddressOnScheme","setVariable","registerEventListener","onRefreshPage","bind","sessionpromise","_doCheckSession","_doFetchBlankSession","checkNavigationState","app_start_conditions","getVariable","treated","start_url","url","gotoUrl","unregisterEventListener","lastrefresh","doResetSession","record","jumpto","routes","map","route","index","name","onRouteSwitch","renderRoute","item","params","_getDataObjectFromCallParams","dataobj","newparams","dataobject","action","gotoMyQuotePage","txhash","_getRoutePathFromName","refreshPage","invokeAsyncHooks","ret","urlParams","get","pos","indexOf","getMyQuoteDataObject","_getDataObjectFromComposedHash","tokenid","_getDataObjectFromCard","arr","routing","type","getCleanUrl","cleanurl","startsWith","window","location","href","URL","require","queryobject","parse","query","dataobject_routes","_getDataObjectRoutes","gotoRoute","includes","assign","querystring","slice","split","URLSearchParams","_getDataObjectFromUrlParams","getStartDataObject","routings","_getDataObjectRoutings","types","keys","param_name","target","fetchCurrencyTransaction","_query","_encodedurl","b64url","_url","decodebase64","e","hexurl","decodehex","_getPlainQueryParameters","start_data_obj","canFetchTransactions","canfetch","getCurrencyFromUUID","currency","nav_state","reached","pushNavigationState","cardaddress","nextProps","prevState","Routes","getRoutes","extra_routes","React","Component","screen","HomeScreen","LogoutScreen","AboutScreen","DataWipeScreen","DeepLinkScreen","CurrencyCardListScreen","CurrencyCardHomeScreen","ContactListScreen","ContactHomeScreen","propTypes","PropTypes","object","isRequired","string","bool","number","func","mapStateToProps","session","pending","username","login","checkpending","checkedon","wallets","mapDispatchToProps","dispatch","callback","connect"],"sources":["../../../../../../../../../../../imports/app/react-js-ui/js/src/react-view/screens/root/root.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Router } from \"react-router\";\nimport { Route, Switch, Redirect  } from \"react-router-dom\";\n\n//import { BrowserRouter as MyRouter } from 'react-router-dom'\nimport { HashRouter as MyRouter } from 'react-router-dom';\n\nimport PropTypes from 'prop-types';\n\nimport { doFetchBlankSession, doCheckSession, doResetSession } from '@primusmoney/react_client_wallet/imports/view/actions/login/session-actions.js';\nimport { doCheckLoggedIn } from '@primusmoney/react_client_wallet/imports/view/actions/login/login-actions.js';\n\nimport { doCheckWalletLock, doOpenWallet, doResetWallet, doSetWallet } from '@primusmoney/react_client_wallet/imports/view/actions/wallet/wallet-actions.js';\n\nimport { doOpenCard, doResetCard } from '@primusmoney/react_client_wallet/imports/view/actions/card/card-actions.js';\n\n\nimport AboutScreen from '../about/about.js';\nimport HomeScreen from '../home/home.js';\n\nimport DeepLinkScreen from '../deeplinks/deeplink-screen.js';\n\nimport ContactListScreen from '../contact/contact-list-screen.js';\nimport ContactHomeScreen from '../contact/contact-home.js';\n\nimport CurrencyCardHomeScreen from '../common/currency/currency-card-home.js';\nimport CurrencyCardListScreen from '../common/currency/currency-card-list-screen.js';\n\nimport SplashScreen from '../splash/splash.js';\n\nimport DataWipeScreen from '../login/data-wipe.js';\n\n\nimport LogoutScreen from '../login/logout.js';\n\n\n\n\nclass RouteHistory {\n\n\tconstructor(root) {\n\t\tthis.root = root;\n\t}\n\n\tpop() {\n\t\tRouteHistory.todo.pop();\n\t}\n\n\tpush(path) {\n\t\tlet last = this.last();\n\n\t\tif (RouteHistory.todo.length && (RouteHistory.todo[0] == path))\n\t\t\treturn;\n\n\t\tif (last == path)\n\t\t\treturn;\n\n\t\t//RouteHistory.history.push(path);\n\t\tRouteHistory.todo.unshift(path); // last in last out\n\n\t\tthis.setState()\n\t}\n\n\trecord(path) {\n\t\tconsole.log('route is being served ' + path);\n\n\t\tRouteHistory.history.push(path);\n\t}\n\n\tasync setState() {\n\t\tif (RouteHistory.todo.length)\n\t\t\tthis.root._setState({targetpath: [RouteHistory.todo]});\n\t\telse\n\t\t\tthis.root._setState({targetpath: null});\n\n\t}\n\n\tlast() {\n\t\treturn (RouteHistory.history.length ? RouteHistory.history[RouteHistory.history.length - 1] : null);\n\t}\n\n\tjumpto() {\n\t\treturn (RouteHistory.todo.length ? RouteHistory.todo[RouteHistory.todo.length - 1] : null);\n\t}\n}\n\nRouteHistory.history = [];\nRouteHistory.todo = [];\n\n\nclass Root extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.app = this.props.app;\n\t\tthis.getMvcModuleObject = this.app.getMvcModuleObject;\n\t\tthis.getMvcMyQuoteObject = this.app.getMvcMyQuoteObject;\n\n\t\tthis.uuid = this.app.guid();\n\t\t\n\t\t// to do jumps\n\t\tthis.routehistory = new RouteHistory(this);\n\n\t\tthis.closingwallet = false;\n\t\tthis.devicewalletuuid = null;\n\t\t\n\t\tthis.state = {\n\t\t\t\tloading: true,\n\t\t\t\tiSessionPending: false,\n\t\t\t\tisLoggedIn: false,\n\t\t\t\thasFatalError: false,\n\t\t\t\tfatalError: '',\n\t\t};\n    }\n    \n\tasync _setState(json) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.setState(json, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t})\n\t}\n\t\n\t// post render commit phase\n\tcomponentDidUpdate(prevProps) {\n\t\tconsole.log('Root.componentDidUpdate called');\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\t\n\t\tif (!this.props.rootsessionuuid) {\n\t\t\tvar state = this.state; // to fool react-scripts compiler\n\t\t\tstate.isLoggedIn = false;\n\t\t\t\n\t\t\t// no session, get one\n\t\t\tif (!this.state.isSessionPending)\n\t\t\tthis.props.doFetchBlankSession(mvcmodule);\n\t\t}\n\t\telse {\n\t\t\t// a session, check if it is still valid\n\t\t\tvar now = Date.now();\n\t\t\tvar lastcheck = (this.props.lastLoggedInCheck ? this.props.lastLoggedInCheck : 0);\n\t\t\t\n\t\t\tif (this.props.isLoggedIn \n\t\t\t\t\t&& !this.props.loggedInCheckPending\n\t\t\t\t\t&& ((now - lastcheck) > 60000)) // 60 000 = 1 minute\n\t\t\t\tthis.props.doCheckLoggedIn(mvcmodule, this.props.rootsessionuuid);\n\t\t}\n\t}\n\n\t//\n\t// sessions\n\tasync _doFetchBlankSession(mvcmodule, sessionuuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doFetchBlankSession(mvcmodule, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync _doCheckSession(mvcmodule, sessionuuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doCheckSession(mvcmodule, sessionuuid, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\t//\n\t// wallets\n\tasync _doCheckWalletLock(mvcmodule, sessionuuid, walletuuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doCheckWalletLock(mvcmodule, sessionuuid, walletuuid, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync _doOpenWallet(mvcmodule, sessionuuid, walletuuid, walletname, password) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doOpenWallet(mvcmodule, sessionuuid, walletuuid, walletname, password, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync _doSetWallet(walletname, walletuuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doSetWallet(walletname, walletuuid, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync _checkOnline() {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\treturn mvcmyquote.checkOnline()\n\t}\n\n\n\tasync _checkWalletUnlocked() {\n\t\t// used to re-synchronize redux with truth\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\t\tlet iswalletlocked = this.props.iswalletlocked;\n\n\t\tif (!walletuuid)\n\t\t\treturn false;\n\n\t\tif (this.closingwallet === true)\n\t\t\treturn false;\n\n\t\tif (iswalletlocked === false) {\n\t\t\tconst islocked = await this._doCheckWalletLock(mvcmodule, rootsessionuuid, walletuuid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._checkWalletLock:' + err);\n\t\t\t\t\n\t\t\t\tthis.app.error(err);\n\t\n\t\t\t\tthis.props.doResetWallet();\n\t\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tconsole.log('Root._checkWalletUnlocked islocked = ' + islocked );\n\t\n\t\t\tif (islocked !== false) {\n\t\t\t\tthis.props.doResetWallet();\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.props.doResetWallet();\n\t\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tasync _openWallet(walletuuid, walletname, password) {\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\n\t\treturn this._doOpenWallet(mvcmodule, rootsessionuuid, walletuuid, walletname, password);\n\t}\n\n\tasync _setWallet(walletuuid, walletname) {\n\t\treturn this._doSetWallet(walletuuid, walletname);\n\t}\n\n\tasync _resetWallet() {\n\t\tconsole.log('Root._resetWallet called');\n\t\tthis.props.doResetWallet();\n\t}\n\n\n\n\tasync _getDeviceWallet() {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\n\t\tvar devicewllt = await mvcmyquote.readSettings('devicewallet');\n\n\t\tif (devicewllt && devicewllt.walletuuid) \n\t\t\treturn mvcmyquote.getWalletInfo(rootsessionuuid, devicewllt.walletuuid);\n\t}\n\n\tasync _isDeviceWallet(walletuuid) {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet currentwalletuuid = this.props.currentwalletuuid;\n\n\t\tvar devicewllt = await mvcmyquote.readSettings('devicewallet');\n\t\tvar _walletuuid = (walletuuid ? walletuuid : currentwalletuuid);\n\n\t\tif (devicewllt && devicewllt.walletuuid && (_walletuuid === devicewllt.walletuuid)) \n\t\t\treturn true;\n\t\telse\n\t\t\treturn false;\n\t}\n\n\tasync _openDeviceWalletPromise() {\n\n\t\tif ((this.closingwallet === true) && this.closedevicewalletpromise ) {\n\t\t\t// wait closing is completely finished\n\t\t\tlet closed = await this.closedevicewalletpromise;\n\n\t\t\t// reset closing elements\n\t\t\tthis.closingwallet = false;\n\t\t\tthis.closedevicewalletpromise = null;\n\t\t}\n\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\t\n\t\tvar walletuuid;\n\t\tvar walletname = 'devicewallet';\n\t\tvar password;\n\n\t\tvar devicewallet = await this._getDeviceWallet();\n\n\t\tif (devicewallet && devicewallet.uuid) {\n\t\t\t// read settings to get the password\n\t\t\tvar devicewllt = await mvcmyquote.readSettings('devicewallet');\n\n\t\t\twalletuuid = devicewllt.walletuuid;\n\t\t\tpassword = devicewllt.password;\n\n\t\t\tawait this._doOpenWallet(mvcmodule, rootsessionuuid, walletuuid, walletname, password)\t\t\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._openDeviceWallet: ' + err);\n\t\t\t\tthrow err;\n\t\t\t});\n\n\t\t\tthis.devicewalletuuid = walletuuid;\n\n\t\t\treturn devicewallet;\n\t\t}\n\n\t\t// we generate a password\n\t\tpassword = this.app.guid();\n\n\t\t// and create a wallet\n\t\tvar localscheme = await mvcmyquote.getDefaultLocalSchemeInfo(rootsessionuuid);\n\t\tvar localschemeuuid = localscheme.uuid;\n\n\t\tdevicewallet = await mvcmyquote.makeWallet(rootsessionuuid, walletname, localschemeuuid, password)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._openDeviceWallet: ' + err);\n\t\t});\n\n\t\tif (!devicewallet)\n\t\t\treturn Promise.reject('could not create wallet for device');\n\n\t\twalletuuid = devicewallet.uuid;\n\n\t\t// we save device wallet info in the settings\n\t\tvar devicewllt = {};\n\n\t\tdevicewllt.walletuuid = walletuuid;\n\t\tdevicewllt.password = password;\n\t\t\n\t\tawait mvcmyquote.putSettings('devicewallet', devicewllt);\n\n\t\tthis.devicewalletuuid = walletuuid;\n\t\n\t\t\n\t\t// then open wallet\n\t\tawait this._doOpenWallet(mvcmodule, rootsessionuuid, walletuuid, walletname, password)\t\t\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._openDeviceWallet: ' + err);\n\t\t\tthrow err;\n\t\t});\n\n\n\t\t// return device wallet\n\t\treturn devicewallet;\n\t}\n\n\tasync _openDeviceWallet() {\n\t\tconsole.log('Root._openDeviceWallet called');\n\n\t\t// to make _openDeviceWallet re-entrant, we store and return a single promise\n\t\tif ((this.openingdevicewallet === true) && this.opendevicewalletpromise) {\n\t\t\treturn this.opendevicewalletpromise;\n\t\t}\n\n\t\tthis.openingdevicewallet = true;\n\t\tthis.opendevicewalletpromise = this._openDeviceWalletPromise();\n\n\t\treturn this.opendevicewalletpromise;\n\t}\n\n\n\t_closeDeviceWallet() {\n\t\tconsole.log('Root._closeDeviceWallet called');\n\n\t\tif (this.devicewalletuuid) {\n\t\t\tlet _devicewalletuuid = this.devicewalletuuid;\n\n\t\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\t\tlet currentwalletuuid =  this.props.currentwalletuuid;\n\n\t\t\tif (currentwalletuuid == _devicewalletuuid) {\n\t\t\t\tthis.closingwallet = true;\n\t\t\t\tthis.devicewalletuuid = null;\n\n\t\t\t\t// reset correspongin opening\n\t\t\t\tthis.openingdevicewallet = false;\n\t\t\t\tthis.opendevicewalletpromise = null;\n\n\t\t\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\t\t\tconsole.log('locking device wallet');\n\n\t\t\t\t// we lock the wallet to avoid _checkWalletUnlocked\n\t\t\t\t// restoring the wallet in the state through the reducer\n\n\t\t\t\t// note: lockWallet is async but lock flag should be\n\t\t\t\t// set immediately\n\t\t\t\tthis.closedevicewalletpromise = mvcmyquote.lockWallet(rootsessionuuid, currentwalletuuid)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.props.doResetWallet();\n\n\t\t\t\t\tthis.closingwallet = false;\n\n\t\t\t\t\tconsole.log('Root._closeDeviceWallet wallet is closed');\n\n\t\t\t\t\treturn true;\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log('error in Root._closeDeviceWallet ' + err);\n\n\t\t\t\t\tthis.closingwallet = false;\n\t\t\t\t\treturn true;\n\t\t\t\t})\n\n\t\t\t}\n\t\t}\n\t}\n\n\t//\n\t// cards\n\tasync _doOpenCard(mvcmodule, sessionuuid, walletuuid, carduuid) {\n\t\tconst result = new Promise((resolve, reject) => { \n\t\t\tthis.props.doOpenCard(mvcmodule, sessionuuid, walletuuid, carduuid, (err, res) => {\n\t\t\t\tif (err) reject(err); else resolve(res);\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn result;\n\t}\n\n\tasync _resetCard() {\n\t\tconsole.log('Root._resetCard called');\n\t\tthis.props.doResetCard();\n\t}\n\n\n\tasync _openCard(carduuid) {\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tif (!walletuuid)\n\t\t\treturn;\n\n\t\t// we open the card, this sets it as current card in redux\n\t\tlet success = true;\n\n\t\tawait this._doOpenCard(mvcmodule, rootsessionuuid, walletuuid, carduuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._openCard: ' + err);\n\t\t\tsuccess = false;\n\t\t});\n\t\t\n\t\treturn success;\n\t}\n\n\n\tasync _openCurrencyCard(currencyuuid) {\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tif (!walletuuid)\n\t\t\treturn;\n\n\t\t// look if we have a card for this currency\n\t\tconst card = await mvcmyquote.getCurrencyCard(rootsessionuuid, walletuuid, currencyuuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._openCurrencyCard: ' + err);\n\t\t});\n\n\t\tif (!card)\n\t\t\treturn Promise.reject('could not find main card for currency ' + currencyuuid);\n\n\t\t// we open the card, this sets it as current card in redux\n\t\tlet carduuid = card.uuid;\n\n\t\tawait this._doOpenCard(mvcmodule, rootsessionuuid, walletuuid, carduuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._openCurrencyCard: ' + err);\n\t\t});\n\t\t\n\t\treturn card;\n\t}\n\n\tasync _createCurrencyCard(currencyuuid, signingkey, options) {\n\t\tconsole.log('Root._createCurrencyCard');\n\n\t\tif (!currencyuuid)\n\t\t\treturn Promise.reject('no currency uuid defined');\n\t\t\n\t\tif (!signingkey)\n\t\t\treturn Promise.reject('no private key defined');\n\t\t\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tlet card;\n\n\t\tlet validprivatekey = await mvcmyquote.isValidPrivateKey(rootsessionuuid, signingkey);\n\n\t\tif (validprivatekey) {\n\t\t\tcard = await mvcmyquote.createCurrencyCard(rootsessionuuid, walletuuid, currencyuuid, signingkey)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._createCurrencyCard: ' + err);\n\t\t\t});\n\t\t}\n\t\telse if (options && (options.allow_readonly === true)) {\n\t\t\tlet validaddress = await mvcmyquote.isValidAddress(rootsessionuuid, signingkey);\n\n\t\t\tif (validaddress) {\n\t\t\t\tcard = await mvcmyquote.createReadOnlyCurrencyCard(rootsessionuuid, walletuuid, currencyuuid, signingkey)\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log('error in Root._createCurrencyCard: ' + err);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!card) {\n\t\t\tthis.app.alert('Could not create card from private key or address');\n\t\t\treturn;\n\t\t}\n\n\n\t\tif (options && (options.maincard === true)) {\n\t\t\t// set as main card for this currency\n\t\t\tawait mvcmyquote.setCurrencyCard(rootsessionuuid, walletuuid, currencyuuid, card.uuid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._createCurrencyCard: ' + err);\n\t\t\t});\n\t\t}\n\n\n\t\t// we open the card, this sets it as current card in redux\n\t\tlet carduuid = card.uuid;\n\n\t\tawait this._doOpenCard(mvcmodule, rootsessionuuid, walletuuid, carduuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._createCurrencyCard: ' + err);\n\t\t});\n\t\t\n\t\treturn card;\n\t}\n\n\tasync _getCurrencyFeeLevel(currencyuuid) {\n\t\tvar boot_webapp = this.app.boot_webapp;\n\n\t\tif (boot_webapp.schemes) {\n\t\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\t\tlet schemeinfo = await mvcmyquote.getCurrencyScheme(rootsessionuuid, walletuuid, currencyuuid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._getCurrencyFeeLevel: ' + err)\n\t\t\t});\n\n\t\t\tif (schemeinfo) {\n\t\t\t\tlet schemesoverload = Object.values(boot_webapp.schemes);\n\n\t\t\t\tfor (var i = 0; i < schemesoverload.length; i++) {\n\t\t\t\t\tif (schemesoverload[i].uuid == schemeinfo.uuid) {\n\t\t\t\t\t\treturn (schemesoverload[i].ethnodeserver ? schemesoverload[i].ethnodeserver.feelevel : null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t}\n\n\t}\n\n\n\tasync _createLocalCard(web3providerurl, signingkey) {\n\t\tconsole.log('Root._createLocalCard');\n\n\t\tif (!web3providerurl)\n\t\t\treturn Promise.reject('no web3 provider url defined');\n\t\t\n\t\tif (!signingkey)\n\t\t\treturn Promise.reject('no private key defined');\n\t\t\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tconst card = await mvcmyquote.createCard(rootsessionuuid, walletuuid, web3providerurl, signingkey)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._createLocalCard: ' + err);\n\t\t});\n\n\t\tif (!card) {\n\t\t\tthis.app.alert('Could not create card from private key');\n\t\t\treturn;\n\t\t}\n\n\t\t// we open the card, this sets it as current card in redux\n\t\tlet carduuid = card.uuid;\n\n\t\tawait this._doOpenCard(mvcmodule, rootsessionuuid, walletuuid, carduuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._createLocalCard: ' + err);\n\t\t});\n\t\t\n\t\treturn card;\n\t}\n\n\n\tasync _openLocalCard(schemeuuid, address) {\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tif (!walletuuid)\n\t\t\treturn;\n\n\t\tvar card = await mvcmyquote.getCardInfoFromAddressOnScheme(rootsessionuuid, walletuuid, schemeuuid, address)\n\n\t\tif (!card)\n\t\t\treturn Promise.reject('could not find curency card for address ' + address);\n\n\t\t// we open the card, this sets it as current card in redux\n\t\tawait this._doOpenCard(mvcmodule, rootsessionuuid, walletuuid, card.uuid)\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root._openLocalCard: ' + err);\n\t\t});\n\t\t\n\t\treturn card;\n\t}\n\n\n\t\n\tcomponentDidMount() {\n\t\tconsole.log('Root.componentDidMount called');\n\t\tlet mvcmodule = this.getMvcModuleObject();\n\t\tlet mvcmyquote = this.app.getMvcMyQuoteObject();\n\t\t\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\t\n\t\t// register to app\n\t\tthis.app.setVariable('Root',this);\n\n\t\tmvcmyquote.registerEventListener('on_refreshPage', this.uuid, this.onRefreshPage.bind(this));\n\n\t\t// check we have a valid rootsession\n\t\tvar sessionpromise;\n\n\t\tif (rootsessionuuid) {\n\t\t\tsessionpromise = this._doCheckSession(mvcmodule, rootsessionuuid)\n\t\t\t.catch(err => {\n\t\t\t\tif (err === 'ERR_SESSION_NOT_FOUND')\n\t\t\t\treturn this._doFetchBlankSession(mvcmodule);\n\n\t\t\t\tthrow err;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tsessionpromise = this._doFetchBlankSession(mvcmodule);\n\t\t}\n\t\t\n\t\tsessionpromise\n\t\t.then(() => {\n\t\t\treturn this.checkNavigationState();\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log('error in Root.componentDidMount: ' + err);\n\t\t});\n\t}\n\n\tasync checkNavigationState() {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\n \t\tlet app_start_conditions = this.app.getVariable('start_conditions');\n\n\t\tif (app_start_conditions && (app_start_conditions.treated != true)) {\n\t\t\tlet start_url = app_start_conditions.url;\n\n\t\t\tawait this.app.gotoUrl(start_url).catch(err => {\n\t\t\t\tconsole.log('error in Root.checkNavigationState: ' + err);\n\t\t\t});\n\n\t\t\tapp_start_conditions.treated = true;\n\t\t}\n \n\n\t\tthis.setState({loading: false});\n\t\treturn;\n\t}\n\n\t// end of life\n\tcomponentWillUnmount() {\n\t\tconsole.log('Root.componentWillUnmount called');\n\t\tlet mvcmyquote = this.app.getMvcMyQuoteObject();\n\t\t\n\t\tmvcmyquote.unregisterEventListener('on_refreshPage', this.uuid);\n\t\t\n\t\t// unregister from app\n\t\tthis.app.setVariable('Root',null);\n\t}\n\n\tasync onRefreshPage() {\n\t\tconsole.log('Root.onRefreshPage called');\n\t\tlet lastrefresh = Date.now();\n\t\t\n\t\tawait this._setState({lastrefresh: lastrefresh});\n\t}\n\t\n\tasync onResetSession() {\n\t\tconsole.log('Root.onResetSession pressed!');\n\t\t\n\t\tthis.setState({hasFatalError: false});\n \n\t\tthis.props.doResetSession();\n\t}\n\t\n\t// rendering\n\tonRouteSwitch(path) {\n\t\tthis.routehistory.record(path);\n\t}\n\n\trenderRoute() {\n\t\tif (this.state.loading) {\n\t\t\treturn (\n\t\t\t\t<div className=\"RootContainer\">\n\t\t\t\t\t<SplashScreen \n\t\t\t\t\t\tapp = {this.app}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet jumpto = this.routehistory.jumpto();\n\t\t//let jumpto = this.state.targetpath;\n\n\n\t\tif (jumpto) {\n\t\t\t\tthis.routehistory.pop();\n\t\t\t\treturn (<Redirect to={jumpto} />);\n\t\t}\n\t\telse {\n\t\t\treturn (\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{Root.routes.map((route, index) => {\n\t\t\t\t\t\t\t\treturn <Route exact path={route.path} key={route.name} render={(props) => { return (<route.screen {...props} app={this.app} path={this.onRouteSwitch(route.path)}/>);}} />\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Switch>\n\t\t\t);\n\t\t}\n\n\t}\n\n    render() {\n\n\t\tconst {isSessionPending, hasFatalError} = this.state;\n\t\t\n\t\tif (isSessionPending) {\n\t\t\treturn (\n\t\t\t\t<div className=\"RootContainer\">\n\t\t\t\t\t<div>creating session...</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tif (!hasFatalError) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"RootContainer\">\n\t\t\t\t\t\t<MyRouter>\n\t\t\t\t\t\t{/*<MyRouter basename={'/' + this.app.basename}>*/}\n\t\t\t\t\t\t\t{this.renderRoute()}\n\t\t\t\t\t\t</MyRouter>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"RootContainer\">\n\t\t\t\t\t\t<div>Fatal error</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t}\t \t\n\t}\n\t\n\t// navigation\n\t_getRoutePathFromName(route){\n\t\tfor (var i = 0; i < Root.routes.length; i++){\n\t\t\tvar item = Root.routes[i];\n\t\t\tif (item.name == route)\n\t\t\t\treturn item.path\n\t\t} \n\t} \n\n\tasync _gotoRoute(route, params) {\n\t\tif (route == 'dataobject') {\n\t\t\t// generic route, used for exemple when logging-in\n\t\t\t// was needed before being able to read transaction\n\t\t\tvar dataobj = await this._getDataObjectFromCallParams(params);\n\n\t\t\tif (dataobj) {\n\t\t\t\tvar newparams = {dataobject: dataobj, action: params.action };\n\t\t\t\tawait this.app.gotoMyQuotePage(newparams);\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('Root._gotoRoute could not find data object for txhash ' + params.txhash + ' currency ' + params.currencyuuid);\n\t\t\t}\n\n\t\t}\n\n\t\tvar path = this._getRoutePathFromName(route);\n\n\t\tconsole.log('Root.gotoRoute called asking to jump to ' + path );\n\n\t\tif (path) {\n\t\t\tthis.routehistory.push(path);\n\t\t\t\n\t\t\tawait this.app.refreshPage();\n\t\t}\n\t\t\n\t}\n\n\tasync _getDataObjectFromComposedHash(txhash, currencyuuid) {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\t// invoke async hook to let client treat the composed hash\n\t\tvar result = []; \n\t\tvar params = [];\n\n\t\tparams.push(rootsessionuuid);\n\t\tparams.push(walletuuid);\n\t\tparams.push(txhash);\n\t\tparams.push(currencyuuid);\n\n\t\tlet ret = await mvcmyquote.invokeAsyncHooks('getDataObjectFromComposedHash_asynchook', result, params);\n\n\t\tif (ret && result.dataobject) {\n\t\t\treturn result.dataobject;\n\t\t}\n\n\t\t// legacy\n/* \t\tlet dataobject;\n\t\tlet arr = (txhash ? txhash.split('-') : []);\n\n\t\tlet stub = arr[0];\n\n\t\tif (stub == 'dd') {\n\t\t\tlet minteraddress = arr[1];\n\t\t\tlet tokenid = arr[2];\n\n\t\t\tlet deed = await this._getDeedDataObjectFromMinter(currencyuuid, minteraddress, tokenid);\n\n\t\t\tif (arr.length < 4) {\n\t\t\t\tdataobject = deed;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet index = arr[3];\n\n\t\t\t\tif (deed.clauses && (deed.clauses.length >= index)) {\n\t\t\t\t\tlet clause = deed.clauses[index];\n\n\t\t\t\t\tdataobject = clause;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// we could not make sense of this hash, stick to the deed\n\t\t\t\t\tdataobject = deed;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn Promise.reject('do not recognize transaction hash stub: ' + stub);\n\t\t}\n\n\t\treturn dataobject; */\n\t}\n\n\tasync _getDataObjectFromUrlParams(urlParams) {\n\t\tif (!urlParams)\n\t\t\treturn;\n\n\t\tvar dataobject;\n\n\t\tlet currencyuuid = urlParams.get('ccy');\n\t\tlet txhash = urlParams.get('tx');\n\t\tlet card = urlParams.get('card');\n\n\t\tif (txhash) {\n\t\t\tlet pos = (txhash ? txhash.indexOf('-') : -1);\n\n\t\t\tif (pos == -1) {\n\t\t\t\t// plain hash of a transaction\n\t\t\t\tdataobject = await this.app.getMyQuoteDataObject(txhash, currencyuuid);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdataobject = await this._getDataObjectFromComposedHash(txhash, currencyuuid);\n\t\t\t}\n\t\t}\n\t\telse if (card) {\n\t\t\t// not txhash, but a currency, a card and a tokenid\n\t\t\tlet tokenid = urlParams.get('tokenid');\n\n\t\t\tif (tokenid) {\n\t\t\t\tdataobject = await this._getDataObjectFromCard(currencyuuid, card, tokenid);\n\t\t\t}\n\t\t}\n\n\t\treturn dataobject;\n\n\t}\n\n\tasync _getDataObjectFromCallParams(params) {\n\t\tvar dataobject;\n\n\t\tlet currencyuuid = params.currencyuuid;\n\t\tlet txhash = params.txhash;\n\n\t\tlet pos = (txhash ? txhash.indexOf('-') : -1);\n\n\t\t// TODO: look if there is a '-' in the transaction hash\n\t\tif (pos == -1) {\n\t\t\tdataobject = await this.app.getMyQuoteDataObject(txhash, currencyuuid);\n\t\t}\n\t\telse {\n\t\t\tdataobject = await this._getDataObjectFromComposedHash(txhash, currencyuuid);\n\t\t}\n\n\t\treturn dataobject;\n\t}\n\n\t_getDataObjectRoutes() {\n\t\tvar arr = [/* 'quote', 'order', 'invoice', 'paymentnotice', 'bounty', 'claim', 'deed', 'clause' */]; // built-in\n\n\t\t// add routes that are marked as linked to data objects\n\t\tconst routes = Root.routes;\n\n\t\tfor (var i = 0; i < Root.routes.length; i++){\n\t\t\tvar item = Root.routes[i];\n\t\t\tif (item.dataobject)\n\t\t\tarr.push(item.name);\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t_getDataObjectRoutings() {\n\t\tvar map = {}; \n\t\t\n\t\t// built-in\n/*\t\tmap['quote'] = {type: 'quote', path: 'quote', action: 'view', params: ['txhash', 'currencyuuid']};\n\t\tmap['order'] = {type: 'order', path: 'order', action: 'view', params: ['txhash', 'currencyuuid']};\n\t\tmap['invoice'] = {type: 'invoice', path: 'invoice', action: 'view', params: ['txhash', 'currencyuuid']};\n\t\tmap['paymentnotice'] = {type: 'paymentnotice', path: 'paymentnotice', action: 'view', params: ['txhash', 'currencyuuid']};\n\n\t\tmap['bounty'] = {type: 'bounty', path: 'bounty', action: 'view', params: ['txhash', 'currencyuuid']};\n\t\tmap['claim'] = {type: 'claim', path: 'claim', action: 'view', params: ['txhash', 'currencyuuid']};\n\n \t\tmap['deed'] = {type: 'deed', path: 'deed', action: 'view', params: ['txhash', 'currencyuuid', 'minter', 'tokenid']};\n\t\tmap['clause'] = {type: 'clause', path: 'clause', action: 'view', params: ['txhash', 'currencyuuid', 'minter', 'tokenid', 'index']};\n */\n\t\t// add dataobject routing for routes that are marked as linked to data objects\n\t\tconst routes = Root.routes;\n\n\t\tfor (var i = 0; i < Root.routes.length; i++){\n\t\t\tvar item = Root.routes[i];\n\t\t\tif (item.dataobject) {\n\t\t\t\tvar routing = {};\n\n\t\t\t\trouting.type = item.dataobject.type;\n\t\t\t\trouting.path = item.dataobject.path;\n\t\t\t\trouting.action = item.dataobject.action;\n\t\t\t\trouting.params = item.dataobject.params;\n\n\t\t\t\tmap[item.dataobject.type] = routing;\n\t\t\t}\n\t\t}\n\n\t\treturn map;\t\t\n\t}\n\n\n\tasync _gotoUrl(url) {\n\n\t\tlet cleanurl = await this.app.getCleanUrl();\n\n\t\tif (url && (url.startsWith(cleanurl) !== true)) {\n\t\t\t// this is a jump to another site\n\t\t\twindow.location.href = url;\n\n\t\t\treturn;\n\t\t}\n\n\n\t\t// look if a session, route or transaction is defined in the url\n\t\tconst URL = require(\"url\");\n\t\tvar queryobject = (url ? URL.parse(url, true).query : {});\n\t\tvar dataobject_routes = this._getDataObjectRoutes();\n\n\t\t//\n\t\t// reconnecting to a session\n\t\tlet sessionuuid = queryobject.sessionuuid;\n\n\t\tif (sessionuuid) {\n\t\t\t// we need to reconnect to a pre-existing session\n\t\t\t// (e.g. coming back from oauth2 authentication)\n\t\t\tthis.setState({loading: false});\n\t\t\tthis.app.gotoRoute('login');\n\t\t\treturn;\n\t\t}\n\n\t\t//\n\t\t// following a route given in the param \"route\" in the url\n\t\tlet route = queryobject.route;\n\n\t\tif (route && (dataobject_routes.includes(route) !== true)) {\n\t\t\t// a route indicates the way\n\t\t\t// and we don't follow routes reserved for dataobject here\n\t\t\tlet params = Object.assign({}, queryobject);\n\t\t\tthis.app.gotoRoute(route, params);\n\t\t\treturn;\n\t\t}\n\n\t\t//\n\t\t// looking for a dataobjet that will define a route from its type\n\t\tvar urlParams;\n\t\tlet dataobject;\n\n\t\tif (url) {\n\t\t\tvar querystring = (url.indexOf('?') > 0 ? url.slice(url.indexOf('?')) : url); // after ?\n\t\t\tquerystring = (querystring.indexOf('#') > 0 ? querystring.split('#')[0] : querystring); // remove trailing anchor\n\t\t\turlParams = new URLSearchParams(querystring);\n\t\t\tdataobject = await this._getDataObjectFromUrlParams(urlParams);\n\t\t}\n\t\telse {\n\t\t\t// initial url\n\t\t\tlet app_start_conditions = this.app.getVariable('start_conditions');\n\t\t\turlParams = app_start_conditions.urlParams;\n\t\t\tdataobject = await this.app.getStartDataObject(); // should be the same than this._getDataObjectFromUrlParams(urlParams);\n\t\t}\n\t\t\n\t\tif (dataobject) {\n\t\t\tlet params = {dataobject: dataobject};\n\n\t\t\tif (dataobject.type) {\n\t\t\t\tlet routings = this._getDataObjectRoutings();\n\t\t\t\tlet types = Object.keys(routings);\n\n\t\t\t\tif (types.includes(dataobject.type)) {\n\t\t\t\t\tlet routing = routings[dataobject.type];\n\t\t\t\t\tparams.action = routing.action;\n\n\t\t\t\t\tfor (var i = 0; i < (routing.params ? routing.params.length : 0); i++) {\n\t\t\t\t\t\tlet param_name = routing.params[i];\n\t\t\t\t\t\tparams[param_name] = dataobject[param_name];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.app.gotoRoute(routing.path, params);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// legacy, to remove\n/* \t\t\tswitch(dataobject.type) {\n\t\t\t\tcase 'bounty':\n\t\t\t\t\tparams.action = 'create';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tthis.app.gotoRoute('claim', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'claim':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tthis.app.gotoRoute('claim', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'deed':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tparams.address = dataobject.minter\n\t\t\t\t\tparams.tokenid = dataobject.tokenid\n\t\t\t\t\tthis.app.gotoRoute('deed', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'clause':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tparams.address = dataobject.minter\n\t\t\t\t\tparams.tokenid = dataobject.tokenid\n\t\t\t\t\tparams.index = dataobject.index\n\t\t\t\t\tthis.app.gotoRoute('clause', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'quote':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tthis.app.gotoRoute('quote', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'order':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tthis.app.gotoRoute('order', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'invoice':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tthis.app.gotoRoute('invoice', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'paymentnotice':\n\t\t\t\t\tparams.action = 'view';\n\t\t\t\t\tparams.txhash = dataobject.txhash;\n\t\t\t\t\tparams.currencyuuid = dataobject.currencyuuid;\n\t\t\t\t\tthis.app.gotoRoute('paymentnotice', params);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t} */\n\t\t\t// legacy\n\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\t// no route and no data object\n\t\t\tthis.app.gotoRoute('home');\n\t\t}\n\t\t\n\t}\n\n\tasync _gotoMyQuotePage(params) {\n\t\tif (!params)\n\t\treturn;\n\n\t\t// we define the route according to the quote-order process\n\t\tlet dataobj = params.dataobject;\n\n\t\tif (!dataobj)\n\t\t\treturn;\n\n\t\tvar type = dataobj.type;\n\n\t\tparams.txhash = (dataobj.txhash ? dataobj.txhash : params.txhash);\n\n\t\tswitch(type) {\n\t\t\tcase 'bounty':\n\t\t\t\tparams.route = 'bounty';\n\t\t\t\tparams.action = (params.action ? params.action : (dataobj.target === 'view' ? 'view' : 'create'));\n\t\t\t\treturn this.app.gotoRoute('bounty', params);\n\t\t\tcase 'claim':\n\t\t\t\tparams.route = 'claim';\n\t\t\t\tparams.action = (params.action ? params.action : (dataobj.target === 'view' ? 'view' : 'create'));\n\t\t\t\treturn this.app.gotoRoute('claim', params);\n\t\t\tcase 'quote':\n\t\t\t\tparams.route = 'quote';\n\t\t\t\tparams.action = (params.action ? params.action : (dataobj.target === 'view' ? 'view' : 'create'));\n\t\t\t\treturn this.app.gotoRoute('quote', params);\n\t\t\tcase 'order':\n\t\t\t\tparams.route = 'order';\n\t\t\t\tparams.action = (params.action ? params.action : (dataobj.target === 'view' ? 'view' : 'create'));\n\t\t\t\treturn this.app.gotoRoute('order', params);\n\t\t\tcase 'invoice':\n\t\t\t\tparams.route = 'invoice';\n\t\t\t\tparams.action = (params.action ? params.action : (dataobj.target === 'view' ? 'view' : 'create'));\n\t\t\t\treturn this.app.gotoRoute('invoice', params);\n\t\t\tcase 'paymentnotice':\n\t\t\t\tparams.route = 'paymentnotice';\n\t\t\t\tparams.action = (params.action ? params.action : (dataobj.target === 'view' ? 'view' : 'create'));\n\t\t\t\treturn this.app.gotoRoute('paymentnotice', params);\n\t\t\n\t\t\tdefault:\n\t\t\t\tparams.route = type;\n\t\t\t\treturn this.app.gotoRoute(type, params);\n\t\t}\n\t}\n\t\n\tasync _getMyQuoteDataObject(txhash, currencyuuid) {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tif (currencyuuid) {\n\n\t\t\t// give opportunity to client to overload fetchCurrencyTransaction\n\t\t\tvar result = []; \n\t\t\tvar params = [];\n\t\n\t\t\tparams.push(rootsessionuuid);\n\t\t\tparams.push(walletuuid);\n\t\t\tparams.push(txhash);\n\t\t\tparams.push(currencyuuid);\n\t\n\t\t\tlet ret = await mvcmyquote.invokeAsyncHooks('getDataObjectFromCurrencyTransaction_asynchook', result, params);\n\t\n\t\t\tif (ret && result.dataobject) {\n\t\t\t\treturn result.dataobject;\n\t\t\t}\n\t\n\t\t\t// standard fetch\n\t\t\tvar dataobject = await mvcmyquote.fetchCurrencyTransaction(rootsessionuuid, walletuuid, currencyuuid, txhash)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._getMyQuoteDataObject:' + err);\n\t\t\t});\n\n\t\t\tif (dataobject) {\n\t\t\t\t// add transaction hash that is the accessor to object\n\t\t\t\tdataobject.txhash = txhash;\n\n\t\t\t\treturn dataobject;\n\t\t\t}\n\t\t}\t\t\n\t}\n\n\t_getPlainQueryParameters(query) {\n\t\tlet _query = query;\n\n\t\tconst URL = require(\"url\");\n\t\tlet _encodedurl;\n\n\t\tif (query.b64url) {\n\t\t\ttry {\n\t\t\t\t_encodedurl = query.b64url;\n\t\t\t\tlet _url = this.app.decodebase64(_encodedurl);\n\t\t\t\t\n\t\t\t\t_query = (_url ? URL.parse(_url, true).query : _query);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\tconsole.log('exception in Root._getPlainQueryParameters:' + e);\n\t\t\t}\n\t\t}\n\t\telse if (query.hexurl) {\n\t\t\ttry {\n\t\t\t\t_encodedurl = query.hexurl;\n\t\t\t\tlet _url = this.app.decodehex(_encodedurl);\n\t\t\t\t\n\t\t\t\t_query = (_url ? URL.parse(_url, true).query :_query);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\tconsole.log('exception in Root._getPlainQueryParameters:' + e);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn _query;\n\t}\n\n\tasync _getStartParameters() {\n\t\tlet app_start_conditions = this.app.getVariable('start_conditions');\t\n\n\t\tconst URL = require(\"url\");\n\t\tlet url = app_start_conditions.url;\n\t\tlet queryobject = (url ? URL.parse(url, true).query : {});\n\n\t\treturn this._getPlainQueryParameters(queryobject);\n\t}\n\n\tasync _getStartDataObject() {\n\t\tlet app_start_conditions = this.app.getVariable('start_conditions');\n\t\tlet urlParams = app_start_conditions.urlParams;\n\n\t\tlet start_data_obj = app_start_conditions.dataobject;\n\n\t\tif (start_data_obj)\n\t\t\treturn start_data_obj;\n\n\t\tif (urlParams) {\n\t\t\tlet target = urlParams.get('route');\n\n\t\t\tstart_data_obj = await this._getDataObjectFromUrlParams(urlParams);\n\n\t\t\tif (!start_data_obj)\n\t\t\t\treturn;\n\n\t\t\tstart_data_obj.target = target;\n\n\t\t\tapp_start_conditions.dataobject = start_data_obj;\n\t\t}\n\n\t\treturn start_data_obj;\n\t}\n\n\tasync _onEmptyStartDataObject(txhash, currencyuuid) {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tlet canfetch = await mvcmyquote.canFetchTransactions(rootsessionuuid, walletuuid, currencyuuid);\n\n\t\tif (canfetch) {\n\t\t\tthis.app.error('Root did not fill dataobj');\n\t\t}\n\t\telse {\n\t\t\tlet currency = await mvcmyquote.getCurrencyFromUUID(rootsessionuuid, currencyuuid);\n\n\t\t\tif (currency) {\n\t\t\t\tthis.app.error('You need to login first with corresponding authentication for currency ' + currency.name);\n\n\t\t\t\tlet params = {txhash, currencyuuid, action: 'view'};\n\t\t\t\tvar nav_state = {route: 'dataobject', params, reached: false};\n\t\t\t\tnav_state.target = {route: 'dataobject', params};\n\n\t\t\t\tthis.app.pushNavigationState(nav_state);\n\n\t\t\t\tawait this.app.gotoRoute('login', params);\n\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.app.error('Currency uuid is not recognized: ' + currencyuuid);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tasync _getDataObjectFromCard(currencyuuid, cardaddress, tokenid) {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tif (currencyuuid) {\n\n\t\t\t// invoke async hook to let client treat the from card case\n\t\t\tvar result = []; \n\t\t\tvar params = [];\n\t\n\t\t\tparams.push(rootsessionuuid);\n\t\t\tparams.push(walletuuid);\n\t\t\tparams.push(currencyuuid);\n\t\t\tparams.push(cardaddress);\n\t\t\tparams.push(tokenid);\n\t\n\t\t\tlet ret = await mvcmyquote.invokeAsyncHooks('getDataObjectFromCard_asynchook', result, params);\n\t\n\t\t\tif (ret && result.dataobject) {\n\t\t\t\treturn result.dataobject;\n\t\t\t}\n\n\t\t\t// legacy\n/* \t\t\tlet minter = await mvcmyquote.fetchDeedMinterFromOwner(rootsessionuuid, walletuuid, currencyuuid, cardaddress);\n\n\t\t\tif (!minter)\n\t\t\t\treturn Promise.reject('could not find minter linked to address ' + cardaddress);\n\n\t\t\tvar dataobject = await mvcmyquote.fetchDeed(rootsessionuuid, walletuuid, currencyuuid, minter, tokenid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root._getDataObjectFromCard:' + err);\n\t\t\t});\n\n\t\t\treturn dataobject; */\n\t\t}\t\t\n\t}\n\n\t// deed legacy\n/* \tasync _getDeedDataObjectFromMinter(currencyuuid, minteraddress, tokenid) {\n\t\tlet mvcmyquote = this.getMvcMyQuoteObject();\n\n\t\tlet rootsessionuuid = this.props.rootsessionuuid;\n\t\tlet walletuuid = this.props.currentwalletuuid;\n\n\t\tif (currencyuuid) {\n\n\t\t\tlet minter = await mvcmyquote.fetchDeedMinterFromAddress(rootsessionuuid, walletuuid, currencyuuid, minteraddress);\n\n\t\t\tif (!minter)\n\t\t\t\treturn Promise.reject('could not find minter linked to address ' + minteraddress);\n\n\t\t\tvar dataobject = await mvcmyquote.fetchDeed(rootsessionuuid, walletuuid, currencyuuid, minter, tokenid)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log('error in Root.async_getDeedDataObjectFromMinter:' + err);\n\t\t\t});\n\n\t\t\treturn dataobject;\n\t\t}\t\t\n\t} */\n\t// legacy\n\n\tasync _logout() {\n\t\tthis.props.doResetSession();\n\t}\n\n\t\n\t\n\t// static methods\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\t// fill state\n\t\treturn {\n\t\t\tisSessionPending: nextProps.isSessionPending,\n\t\t};\n\t}\n\t\n\tstatic getDerivedStateFromError(error) {\n\t\treturn { hasFatalError: true };\n\t}\n\n\tstatic async loadRoutes(app) {\n\t\tlet Routes = require('./routes/routes.js');\n\n\t\tlet extra_routes = await Routes.default.getRoutes(app);\n\n\t\tfor (var i = 0; i < extra_routes.length; i++) {\n\t\t\tRoot.routes.push(extra_routes[i]);\n\t\t}\n\n\t}\n}\n\nRoot.routes = [\n\t{\n\t\tname: 'root',\n\t\tpath: '/',\n\t\tscreen: HomeScreen\n\n\t},\n\t{\n\t\tname: 'home',\n\t\tpath: '/home',\n\t\tscreen: HomeScreen\n\n\t},\n\t{\n\t\tname: 'login',\n\t\tpath: '/login',\n\t\tscreen: HomeScreen\n\t},\n\t{\n\t\tname: 'logout',\n\t\tpath: '/logout',\n\t\tscreen: LogoutScreen\n\t},\n\t{\n\t\tname: 'exit',\n\t\tpath: '/exit',\n\t\tscreen: AboutScreen\n\t},\n\t{\n\t\tname: 'datawipe',\n\t\tpath: '/datawipe',\n\t\tscreen: DataWipeScreen\n\t},\n\t{\n\t\tname: 'deeplink',\n\t\tpath: '/deeplink',\n\t\tscreen: DeepLinkScreen\n\t},\n\t{\n\t\tname: 'currencycards',\n\t\tpath: '/currencycards',\n\t\tscreen: CurrencyCardListScreen\n\t},\t\n\t{\n\t\tname: 'currencycard',\n\t\tpath: '/currencycard',\n\t\tscreen: CurrencyCardHomeScreen\n\t},\n\t{\n\t\tname: 'about',\n\t\tpath: '/about',\n\t\tscreen: AboutScreen\n\t},\n\t{\n\t\tname: 'contacts',\n\t\tpath: '/contacts',\n\t\tscreen: ContactListScreen\n\t},\n\t{\n\t\tname: 'contact',\n\t\tpath: '/contact',\n\t\tscreen: ContactHomeScreen\n\t},\n\n];\n\n\n// propTypes validation\nRoot.propTypes = {\n\tapp: PropTypes.object.isRequired,\n\trootsessionuuid: PropTypes.string,\n\tisSessionPending: PropTypes.bool,\n\tisLoggedIn: PropTypes.bool,\n\tlastLoggedInCheck: PropTypes.number,\n\tloggedInCheckPending: PropTypes.bool,\n\tdoFetchBlankSession: PropTypes.func.isRequired,\n\tdoCheckSession: PropTypes.func.isRequired,\n\tdoResetSession: PropTypes.func.isRequired,\n\tdoCheckLoggedIn: PropTypes.func.isRequired,\n\tcurrentwalletuuid: PropTypes.string,\n\tiswalletlocked: PropTypes.bool,\n\tdoResetWallet: PropTypes.func.isRequired,\n\tdoOpenWallet: PropTypes.func.isRequired,\n\tdoSetWallet: PropTypes.func.isRequired,\n\tdoCheckWalletLock: PropTypes.func.isRequired,\n\tdoOpenCard: PropTypes.func.isRequired,\n\tdoResetCard: PropTypes.func.isRequired,\n};\n\n//redux\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tisSessionPending: state.session.pending,\n\t\trootsessionuuid: state.session.sessionuuid,\n\t\tusername: state.login.username,\n\t\tisLoggedIn: state.login.success,\n\t\tloggedInCheckPending: state.login.checkpending,\n\t\tlastLoggedInCheck: state.login.checkedon,\n\t\tcurrentwalletuuid: state.wallets.walletuuid,\n\t\tiswalletlocked: state.wallets.islocked,\n\t};\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tdoFetchBlankSession: (mvcmodule, callback) => dispatch(doFetchBlankSession(mvcmodule, callback)),\n\t\tdoCheckSession: (mvcmodule, sessionuuid, callback) => dispatch(doCheckSession(mvcmodule, sessionuuid, callback)),\n\t\tdoResetSession: () => dispatch(doResetSession()),\n\t\tdoCheckLoggedIn: (mvcmodule, sessionuuid, callback) => dispatch(doCheckLoggedIn(mvcmodule, sessionuuid, callback)),\n\t\tdoResetWallet: () => dispatch(doResetWallet()),\n\t\tdoOpenWallet: (mvcmodule, session, walletuuid, walletname, password, callback) => dispatch(doOpenWallet(mvcmodule, session, walletuuid, walletname, password, callback)),\n\t\tdoCheckWalletLock: (mvcmodule, sessionuuid, walletuuid, callback) => dispatch(doCheckWalletLock(mvcmodule, sessionuuid, walletuuid, callback)),\n\t\tdoSetWallet: (walletname, walletuuid) => dispatch(doSetWallet(walletname, walletuuid)),\n\t\tdoOpenCard: (mvcmodule, sessionuuid, walletuuid, carduuid, callback) => dispatch(doOpenCard(mvcmodule, sessionuuid, walletuuid, carduuid, callback)),\n\t\tdoResetCard: () => dispatch(doResetCard()),\n\t};\n}\n\nexport {Root};\nexport default connect(mapStateToProps, mapDispatchToProps)(Root);\n\n"],"mappings":"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"}